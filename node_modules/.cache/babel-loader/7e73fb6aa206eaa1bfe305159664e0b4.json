{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport axios from 'axios';\nexport var download = function download(src, filename) {\n  if (!src) {\n    return;\n  }\n\n  var fileName = filename || ''; // 文件名\n\n  axios({\n    method: 'get',\n    url: src,\n    responseType: 'blob',\n    headers: {\n      'content-type': 'audio/mpeg'\n    }\n  }).then(function (res) {\n    console.log('download---', res);\n    var blobType = 'application/force-download'; // 设置blob请求头\n\n    var blob = new Blob([res.data], {\n      type: res.data.type\n    }); // 创建blob 设置blob文件类型 data 设置为后端返回的文件(例如mp3,jpeg) type:这里设置后端返回的类型 为 mp3\n\n    var downa = document.createElement('a'); // 创建A标签\n\n    var href = window.URL.createObjectURL(blob); // 创建下载的链接\n\n    downa.href = href; // 下载地址\n\n    downa.download = fileName; // 下载文件名\n\n    document.body.appendChild(downa);\n    downa.click(); // 模拟点击A标签\n\n    document.body.removeChild(downa); // 下载完成移除元素\n\n    window.URL.revokeObjectURL(href); // 释放blob对象\n  }).catch(function (error) {// console.log(error)\n  });\n};","map":{"version":3,"sources":["D:/Desktop/git工作区/cloudMusic-Source-Code/src/utils/download.js"],"names":["axios","download","src","filename","fileName","method","url","responseType","headers","then","res","console","log","blobType","blob","Blob","data","type","downa","document","createElement","href","window","URL","createObjectURL","body","appendChild","click","removeChild","revokeObjectURL","catch","error"],"mappings":";;;;;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAUC,GAAV,EAAeC,QAAf,EAAyB;AAC7C,MAAI,CAACD,GAAL,EAAU;AACN;AACH;;AACD,MAAIE,QAAQ,GAAGD,QAAQ,IAAI,EAA3B,CAJ6C,CAIf;;AAC9BH,EAAAA,KAAK,CAAC;AACFK,IAAAA,MAAM,EAAE,KADN;AAEFC,IAAAA,GAAG,EAAEJ,GAFH;AAGFK,IAAAA,YAAY,EAAE,MAHZ;AAIFC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB;AAJP,GAAD,CAAL,CAKGC,IALH,CAKQ,UAACC,GAAD,EAAS;AACbC,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BF,GAA1B;AACA,QAAIG,QAAQ,GAAG,4BAAf,CAFa,CAE+B;;AAC5C,QAAIC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACL,GAAG,CAACM,IAAL,CAAT,EAAqB;AAAEC,MAAAA,IAAI,EAAEP,GAAG,CAACM,IAAJ,CAASC;AAAjB,KAArB,CAAX,CAHa,CAG4C;;AACzD,QAAIC,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAZ,CAJa,CAI2B;;AACxC,QAAIC,IAAI,GAAGC,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2BV,IAA3B,CAAX,CALa,CAK+B;;AAC5CI,IAAAA,KAAK,CAACG,IAAN,GAAaA,IAAb,CANa,CAMK;;AAClBH,IAAAA,KAAK,CAACjB,QAAN,GAAiBG,QAAjB,CAPa,CAOa;;AAC1Be,IAAAA,QAAQ,CAACM,IAAT,CAAcC,WAAd,CAA0BR,KAA1B;AACAA,IAAAA,KAAK,CAACS,KAAN,GATa,CASC;;AACdR,IAAAA,QAAQ,CAACM,IAAT,CAAcG,WAAd,CAA0BV,KAA1B,EAVa,CAUoB;;AACjCI,IAAAA,MAAM,CAACC,GAAP,CAAWM,eAAX,CAA2BR,IAA3B,EAXa,CAWoB;AACpC,GAjBD,EAiBGS,KAjBH,CAiBS,UAAUC,KAAV,EAAiB,CACtB;AACH,GAnBD;AAoBH,CAzBM","sourcesContent":["\r\nimport axios from 'axios'\r\nexport const download = function (src, filename) {\r\n    if (!src) {\r\n        return\r\n    }\r\n    let fileName = filename || '' // 文件名\r\n    axios({\r\n        method: 'get',\r\n        url: src,\r\n        responseType: 'blob',\r\n        headers: { 'content-type': 'audio/mpeg' },\r\n    }).then((res) => {\r\n        console.log('download---',res)\r\n        let blobType = 'application/force-download' // 设置blob请求头\r\n        let blob = new Blob([res.data], { type: res.data.type }) // 创建blob 设置blob文件类型 data 设置为后端返回的文件(例如mp3,jpeg) type:这里设置后端返回的类型 为 mp3\r\n        let downa = document.createElement('a') // 创建A标签\r\n        let href = window.URL.createObjectURL(blob) // 创建下载的链接\r\n        downa.href = href // 下载地址\r\n        downa.download = fileName // 下载文件名\r\n        document.body.appendChild(downa)\r\n        downa.click() // 模拟点击A标签\r\n        document.body.removeChild(downa) // 下载完成移除元素\r\n        window.URL.revokeObjectURL(href) // 释放blob对象\r\n    }).catch(function (error) {\r\n        // console.log(error)\r\n    })\r\n}\r\n"]},"metadata":{},"sourceType":"module"}