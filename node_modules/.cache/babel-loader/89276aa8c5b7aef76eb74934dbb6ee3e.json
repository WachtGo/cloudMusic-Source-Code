{"ast":null,"code":"import QRCode from \"qrcode\"; //转换成年月日\n\nvar transtime = function transtime(millisecond) {\n  if (!millisecond) {\n    return;\n  }\n\n  var year = new Date(millisecond).getFullYear();\n  var month = new Date(millisecond).getMonth() + 1;\n  var date = new Date(millisecond).getDate();\n  return year + '-' + month + '-' + date;\n}; //将时长转化成分秒\n\n\nvar transMusicTime = function transMusicTime(arr, dt) {\n  for (var i = 0; i < arr.length; i++) {\n    var min = parseInt(arr[i][dt] / 1000 / 60);\n    var sec = parseInt(arr[i][dt] / 1000 % 60);\n\n    if (min < 10) {\n      min = \"0\" + min;\n    }\n\n    if (sec < 10) {\n      sec = \"0\" + sec;\n    }\n\n    arr[i][dt] = min + \":\" + sec;\n  }\n}; //将播放量转换成亿万单位\n\n\nvar transPlayCount = function transPlayCount(arr, playCount) {\n  for (var i = 0; i < arr.length; i++) {\n    if (String(arr[i][playCount]).length > 5 && String(arr[i][playCount]).length < 9) {\n      arr[i][playCount] = String(arr[i][playCount]).substr(0, String(arr[i][playCount]).length - 4) + \"万\";\n    } else if (String(arr[i][playCount]).length == 5) {\n      arr[i][playCount] = String(arr[i][playCount]).substr(0, 1) + \".\" + String(arr[i][playCount]).substr(1, 2) + \"万\";\n    } else if (String(arr[i][playCount]).length == 9) {\n      arr[i][playCount] = String(arr[i][playCount]).substr(0, 1) + \".\" + String(arr[i][playCount]).substr(1, 2) + \"亿\";\n    } else if (String(arr[i][playCount]).length > 9) {\n      arr[i][playCount] = String(arr[i][playCount]).substr(0, String(arr[i][playCount]).length - 8) + \"亿\";\n    }\n  }\n}; //获取当前时间戳\n\n\nvar getTimestamp = function getTimestamp() {\n  return new Date().getTime();\n}; //生成二维码\n\n\nvar getQRCode = function getQRCode(qrurl) {\n  var opts = {\n    errorCorrectionLevel: \"H\",\n    //容错级别\n    type: \"image/png\",\n    //生成的二维码类型\n    quality: 0.3,\n    //二维码质量\n    margin: 10,\n    //二维码留白边距\n    width: 180,\n    //宽\n    height: 180,\n    //高\n    text: \"\",\n    //二维码内容\n    color: {\n      dark: \"#333333\",\n      //前景色\n      light: \"#fff\" //背景色\n\n    }\n  };\n  var QRCodeMsg = qrurl; //生成的二维码为URL地址js\n\n  var msg = document.getElementById(\"QRCode_header\"); // 将获取到的数据（val）画到msg（canvas）上\n\n  QRCode.toCanvas(msg, QRCodeMsg, opts, function (error) {\n    console.log(error);\n  });\n};\n\nmodule.exports = {\n  transtime: transtime,\n  transMusicTime: transMusicTime,\n  transPlayCount: transPlayCount,\n  getTimestamp: getTimestamp,\n  getQRCode: getQRCode\n};","map":{"version":3,"sources":["D:/Desktop/git工作区/cloudMusic-Source-Code/src/api/commonApi.js"],"names":["QRCode","transtime","millisecond","year","Date","getFullYear","month","getMonth","date","getDate","transMusicTime","arr","dt","i","length","min","parseInt","sec","transPlayCount","playCount","String","substr","getTimestamp","getTime","getQRCode","qrurl","opts","errorCorrectionLevel","type","quality","margin","width","height","text","color","dark","light","QRCodeMsg","msg","document","getElementById","toCanvas","error","console","log","module","exports"],"mappings":"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","sourcesContent":["import QRCode from \"qrcode\"\r\n\r\n//转换成年月日\r\nconst transtime =  (millisecond) => {\r\n    if (!millisecond) {\r\n        return\r\n    }\r\n    let year = new Date(millisecond).getFullYear();\r\n    let month = new Date(millisecond).getMonth() + 1;\r\n    let date = new Date(millisecond).getDate()\r\n    return year + '-' + month + '-' + date\r\n}\r\n//将时长转化成分秒\r\nconst transMusicTime = (arr, dt) => {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      let min = parseInt(arr[i][dt] / 1000 / 60);\r\n      let sec = parseInt((arr[i][dt] / 1000) % 60);\r\n      if (min < 10) {\r\n        min = \"0\" + min;\r\n      }\r\n      if (sec < 10) {\r\n        sec = \"0\" + sec;\r\n      }\r\n      arr[i][dt] = min + \":\" + sec;\r\n    }\r\n  }\r\n\r\n  //将播放量转换成亿万单位\r\n\r\n  const transPlayCount = (arr,playCount) =>{\r\n    for (let i = 0; i < arr.length; i++) {\r\n        if (\r\n          String(arr[i][playCount]).length > 5 &&\r\n          String(arr[i][playCount]).length < 9\r\n        ) {\r\n          arr[i][playCount] =\r\n            String(arr[i][playCount]).substr(\r\n              0,\r\n              String(arr[i][playCount]).length - 4\r\n            ) + \"万\";\r\n        } else if (String(arr[i][playCount]).length == 5) {\r\n          arr[i][playCount] =\r\n            String(arr[i][playCount]).substr(0, 1) +\r\n            \".\" +\r\n            String(arr[i][playCount]).substr(1, 2) +\r\n            \"万\";\r\n        } else if (String(arr[i][playCount]).length == 9) {\r\n          arr[i][playCount] =\r\n            String(arr[i][playCount]).substr(0, 1) +\r\n            \".\" +\r\n            String(arr[i][playCount]).substr(1, 2) +\r\n            \"亿\";\r\n        } else if (String(arr[i][playCount]).length > 9) {\r\n          arr[i][playCount] =\r\n            String(arr[i][playCount]).substr(\r\n              0,\r\n              String(arr[i][playCount]).length - 8\r\n            ) + \"亿\";\r\n        }\r\n      }\r\n  }\r\n//获取当前时间戳\r\n  const getTimestamp = ()=>{\r\n    return new Date().getTime()\r\n  }\r\n  //生成二维码\r\n  const  getQRCode =  (qrurl) => {\r\n    let opts = {\r\n      errorCorrectionLevel: \"H\",//容错级别\r\n      type: \"image/png\",//生成的二维码类型\r\n      quality: 0.3,//二维码质量\r\n      margin: 10,//二维码留白边距\r\n      width: 180,//宽\r\n      height: 180,//高\r\n      text: \"\",//二维码内容\r\n      color: {\r\n        dark: \"#333333\",//前景色\r\n        light: \"#fff\"//背景色\r\n      }\r\n    };\r\n    let QRCodeMsg = qrurl; //生成的二维码为URL地址js\r\n    let msg = document.getElementById(\"QRCode_header\");\r\n    // 将获取到的数据（val）画到msg（canvas）上\r\n    QRCode.toCanvas(msg, QRCodeMsg, opts, function (error) {\r\n      console.log(error)\r\n    });\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nmodule.exports = {\r\n    transtime,\r\n    transMusicTime,\r\n    transPlayCount,\r\n    getTimestamp,\r\n    getQRCode,\r\n}"]},"metadata":{},"sourceType":"module"}