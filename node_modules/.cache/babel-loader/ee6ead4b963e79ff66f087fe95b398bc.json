{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getMVUrl, getcommentMV, getMvDetails, getMvDetailInfo } from \"@/api/api\";\nexport default {\n  // props: ['mvId'],\n  data: function data() {\n    return {\n      mvUrl: \"\",\n      mvId: \"\",\n      mvComments: [],\n      mvDetail: {},\n      count: \"\",\n      currentPage: 1\n    };\n  },\n  mounted: function mounted() {\n    //缓存id,解决params数据在刷新页面后丢失，导致无法获取到歌单id\n    if (this.$route.params.mvId) {\n      localStorage.setItem(\"mvId\", this.$route.params.mvId);\n    } // 判断是否使用缓存\n\n\n    this.$route.params.mvId ? this.mvId = this.$route.params.mvId : this.mvId = localStorage.getItem(\"mvId\");\n    this.playMV();\n  },\n  methods: {\n    //mv分页\n    videohandleCurrentChange: function videohandleCurrentChange(currentPage) {\n      // console.log(`当前页: ${currentPage}`);\n      this.currentPage = currentPage; // console.log(\"我是第一\"+this.currentPage)\n\n      this.playMV(this.mvId, currentPage);\n    },\n    playMV: function playMV() {\n      var _this = this;\n\n      var params = {\n        mvid: this.mvId\n      };\n      getMVUrl({\n        id: this.mvId\n      }).then(function (res) {\n        _this.mvUrl = res.data.data.url;\n      }); //mv详情\n\n      getMvDetails(params).then(function (res) {\n        // console.log('mv详情---：', res.data.data)\n        _this.mvDetail = res.data.data; // mv点赞转发评论数数据\n\n        getMvDetailInfo(params).then(function (res) {\n          // console.log(\"mv点赞转发评论数数据---:\", res.data);\n          _this.$set(_this.mvDetail, \"likedCount\", res.data.likedCount);\n        });\n      }); // 热门评论;\n\n      getcommentMV({\n        id: this.mvId,\n        limit: 8,\n        offset: (this.currentPage - 1) * 8\n      }).then(function (res) {\n        _this.mvComments = res.data.comments; // console.log(\"我是评论\" + this.mvComments);\n\n        _this.count = res.data.total; // console.log(\"我是最后面\"+page)\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA,SACAA,QADA,EAEAC,YAFA,EAGAC,YAHA,EAIAC,eAJA,QAKA,WALA;AAMA;AACA;AACAC,MAFA,kBAEA;AACA;AACAC,eADA;AAEAC,cAFA;AAGAC,oBAHA;AAIAC,kBAJA;AAKAC,eALA;AAMAC;AANA;AAQA,GAXA;AAYAC,SAZA,qBAYA;AACA;AACA;AACAC;AACA,KAJA,CAKA;;;AACA,8BACA,mCADA,GAEA,wCAFA;AAGA;AACA,GAtBA;AAuBAC;AACA;AACAC;AACA;AACA,qCAFA,CAGA;;AACA;AACA,KAPA;AAQAC,UARA,oBAQA;AAAA;;AACA;AACAC;AADA;AAGAhB;AAAAiB;AAAA;AACA;AACA,OAFA,EAJA,CAOA;;AACAf;AACA;AACA,uCAFA,CAGA;;AACAC;AACA;AACA;AACA,SAHA;AAIA,OARA,EARA,CAiBA;;AACAF;AACAgB,qBADA;AAEAC,gBAFA;AAGAC;AAHA,SAIAC,IAJA,CAIA;AACA,6CADA,CAEA;;AACA,qCAHA,CAIA;AACA,OATA;AAUA;AApCA;AAvBA","names":["getMVUrl","getcommentMV","getMvDetails","getMvDetailInfo","data","mvUrl","mvId","mvComments","mvDetail","count","currentPage","mounted","localStorage","methods","videohandleCurrentChange","playMV","mvid","id","limit","offset","then"],"sourceRoot":"src/views","sources":["mvPlay.vue"],"sourcesContent":["<template>\n  <div class=\"recMv\" style=\"border-radius: 10px\">\n    <div v-if=\"mvId\" style=\"margin: 0 auto; width: 95%\">\n      <video\n        controls\n        autoplay\n        loop\n        :src=\"mvUrl\"\n        style=\"margin: 10px 0; width: 100%; height: 580px\"\n      ></video>\n    </div>\n\n    <div class=\"mvDetail\">\n      <div>\n        <div style=\"margin-bottom: 10px\">\n          <div class=\"authorImg\">\n            <img :src=\"mvDetail.cover\" alt=\" \" />\n          </div>\n          <span class=\"authorName\">{{ mvDetail.artistName }}</span>\n        </div>\n      </div>\n\n      <div style=\"margin-bottom: 10px\">\n        <span class=\"mvTitle\">{{ mvDetail.name }} </span>\n      </div>\n      <div>\n        <span class=\"smallFont\">发布：{{ mvDetail.publishTime }}</span>\n        <span class=\"smallFont\">播放：{{ mvDetail.playCount }}次</span>\n      </div>\n\n      <p style=\"margin-top: 10px\">{{ mvDetail.desc }}</p>\n      <ul>\n        <li class=\"mvTag\" v-for=\"item in mvDetail.videoGroup\" :key=\"item.id\">\n          {{ item.name }}\n        </li>\n      </ul>\n      <div>\n        <span class=\"smallFont border\">赞{{ mvDetail.likedCount }}</span>\n        <span class=\"smallFont border\">收藏{{ mvDetail.subCount }}</span>\n        <span class=\"smallFont border\">分享{{ mvDetail.shareCount }}</span>\n      </div>\n    </div>\n    <div v-if=\"mvId\" style=\"padding: 0px 50px\">\n      <h3 style=\"margin: 5px 0 10px 0; text-align: center\">\n        评论({{ count }}条)\n      </h3>\n      <div class=\"hoverBackColor\" v-for=\"item in mvComments\" :key=\"item.id\">\n        <img\n          :src=\"item.user.avatarUrl\"\n          style=\"width: 50px; border-radius: 25px\"\n        />\n        <span style=\"display: inline-block; margin-left: 10px; font-size: 15px\"\n          >{{ item.user.nickname }}&nbsp;&nbsp;:&nbsp;&nbsp;</span\n        >\n        <span style=\"margin-left: 20px; width: 750px\">\n          {{ item.content }}\n        </span>\n        <div style=\"height: 30px\">\n          <span style=\"float: right; width: 130px\"\n            >&nbsp;&nbsp;时间：{{ item.timeStr }}</span\n          ><span style=\"float: right\"\n            >{{ item.likedCount }} 赞&nbsp;&nbsp;&nbsp;</span\n          >\n        </div>\n      </div>\n      <!-- //评论分页 -->\n    </div>\n    <div\n      class=\"pagination\"\n      style=\"text-align: center; padding-top: 10px; box-sizing: border-box\"\n    >\n      <el-pagination\n        v-if=\"count != 0\"\n        @current-change=\"videohandleCurrentChange\"\n        :current-page.sync=\"currentPage\"\n        :page-size=\"8\"\n        layout=\"prev, pager, next, jumper\"\n        :total=\"count\"\n        :background=\"true\"\n      >\n      </el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  getMVUrl,\n  getcommentMV,\n  getMvDetails,\n  getMvDetailInfo,\n} from \"@/api/api\";\nexport default {\n  // props: ['mvId'],\n  data() {\n    return {\n      mvUrl: \"\",\n      mvId: \"\",\n      mvComments: [],\n      mvDetail: {},\n      count: \"\",\n      currentPage: 1,\n    };\n  },\n  mounted() {\n    //缓存id,解决params数据在刷新页面后丢失，导致无法获取到歌单id\n    if (this.$route.params.mvId) {\n      localStorage.setItem(\"mvId\", this.$route.params.mvId);\n    }\n    // 判断是否使用缓存\n    this.$route.params.mvId\n      ? (this.mvId = this.$route.params.mvId)\n      : (this.mvId = localStorage.getItem(\"mvId\"));\n    this.playMV();\n  },\n  methods: {\n    //mv分页\n    videohandleCurrentChange: function (currentPage) {\n      // console.log(`当前页: ${currentPage}`);\n      this.currentPage = currentPage;\n      // console.log(\"我是第一\"+this.currentPage)\n      this.playMV(this.mvId, currentPage);\n    },\n    playMV() {\n      let params = {\n        mvid: this.mvId,\n      };\n      getMVUrl({ id: this.mvId }).then((res) => {\n        this.mvUrl = res.data.data.url;\n      });\n      //mv详情\n      getMvDetails(params).then((res) => {\n        // console.log('mv详情---：', res.data.data)\n        this.mvDetail = res.data.data;\n        // mv点赞转发评论数数据\n        getMvDetailInfo(params).then((res) => {\n          // console.log(\"mv点赞转发评论数数据---:\", res.data);\n          this.$set(this.mvDetail, \"likedCount\", res.data.likedCount);\n        });\n      });\n      // 热门评论;\n      getcommentMV({\n        id: this.mvId,\n        limit: 8,\n        offset: (this.currentPage - 1) * 8,\n      }).then((res) => {\n        this.mvComments = res.data.comments;\n        // console.log(\"我是评论\" + this.mvComments);\n        this.count = res.data.total;\n        // console.log(\"我是最后面\"+page)\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.recMv {\n  width: 1100px;\n  padding: 0 10px;\n\n  margin: 10px auto;\n\n  max-height: 700px;\n  border-radius: 0 0 10px 10px;\n  background: rgba(95, 158, 160, 0.322);\n  overflow-x: hidden;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  .mvTitle {\n    font-size: 20px;\n  }\n\n  .recMvwrap {\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap; //根据宽度限制一行的盒子个数\n    margin-bottom: 10px;\n    border-radius: 10px;\n    padding: 10px;\n    border-radius: 10px;\n    // background: rgba(95, 158, 160, 0.322);\n  }\n}\n.mvDetail {\n  padding: 10px 50px;\n  // height: 100px;\n  // background: rgb(226, 211, 211);\n  .authorImg {\n    display: inline-block;\n    width: 50px;\n    height: 50px;\n    border-radius: 25px;\n    overflow: hidden;\n    vertical-align: top;\n    img {\n      width: 100%;\n      height: 100%;\n      // vertical-align: top;\n    }\n  }\n  .authorName {\n    display: inline-block;\n    margin-left: 25px;\n    height: 50px;\n    line-height: 50px;\n    font-size: 18px;\n  }\n  .mvTitle {\n    margin-bottom: 10px;\n  }\n  ul {\n    margin: 10px 0;\n    .mvTag {\n      display: inline-block;\n      margin: 0 5px;\n      padding: 2px 5px;\n      background: rgba(231, 217, 192, 0.349);\n      border-radius: 10px;\n    }\n  }\n  .smallFont {\n    margin-right: 10px;\n    height: 20px;\n    line-height: 20px;\n    font-size: 12px;\n    color: rgba(233, 233, 233, 0.829);\n  }\n  .border {\n    margin: 0 5px 0 0;\n    padding: 0 10px;\n    height: 25px;\n    line-height: 25px;\n    font-size: 15px;\n    color: rgb(247, 245, 245);\n    border-radius: 10px;\n    border: 1px solid white;\n  }\n}\n.pagination {\n  /deep/ .el-pager {\n    height: 30px !important;\n    background: none !important;\n  }\n  /deep/ .number,\n  /deep/ .btn-prev,\n  /deep/ .btn-quicknext,\n  /deep/ .btn-next,\n  /deep/ .el-input__inner,\n  /deep/ .more {\n    color: #f2fff7 !important;\n    transition: 0.2s;\n    background: transparent !important;\n  }\n  /deep/ .number:hover,\n  /deep/ .btn-prev:hover,\n  /deep/ .btn-quicknext:hover,\n  /deep/ .btn-next:hover,\n  /deep/ .el-input__inner:hover,\n  /deep/ .more:hover {\n    transform: scale(1.02);\n    color: #f7a588 !important;\n  }\n  /deep/ .active {\n    color: #f7a588 !important;\n  }\n  /deep/ .el-input__inner {\n    border: none;\n  }\n  /deep/ .el-pagination__jump {\n    color: #f7dd88 !important;\n  }\n  /deep/.el-pagination {\n    height: 100%;\n  }\n}\n</style>\n\n\n"]},"metadata":{},"sourceType":"module"}