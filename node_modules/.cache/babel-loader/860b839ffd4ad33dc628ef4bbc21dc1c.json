{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getDownloadUrl } from \"@/api/api\";\nimport { playMusic, listenMusic } from \"@/utils/musicPlay\";\nimport { likeMusic } from \"@/api/needLogin/musicOperate\";\nimport { download } from \"@/utils/commonApi\";\nexport default {\n  props: {\n    songlist: Array\n  },\n\n  data() {\n    return {};\n  },\n\n  methods: {\n    //获取歌曲详情,进入详情页面\n    goSongDetails(songDetails) {\n      // console.log('歌曲信息',songDetails)\n      this.$router.push({\n        name: \"songDetails\",\n        params: {\n          songDetails: songDetails\n        }\n      });\n    },\n\n    //加入/删除喜欢音乐\n    likeMusic(id, bool) {\n      const loading = this.$loading({\n        target: \"#app_body\",\n        background: \"rgba(255,255,255,0.1)\"\n      });\n      likeMusic({\n        id: id,\n        like: bool\n      }).then(res => {\n        this.$nextTick(() => {\n          loading.close();\n        }); // console.log(\"添加\", res);\n\n        if (res.data.code === 200) {\n          if (bool) {\n            this.$message.success(\"已添加入我的喜欢-可进入网易云音乐查看\");\n            return;\n          }\n\n          this.$message.success(\"已从我的喜欢列表删除\");\n        }\n      }).catch(error => {\n        this.$nextTick(() => {\n          loading.close();\n        });\n      });\n    },\n\n    //试听音乐\n    listenMusic(songDetals) {\n      //获取播放音乐链接\n      var that = this;\n      var list = \"songlist\";\n      listenMusic(songDetals, that);\n    },\n\n    //添加歌曲到播放列表\n    playMusic(songDetals) {\n      //获取播放音乐链接\n      var that = this;\n      var list = \"songlist\";\n      playMusic(songDetals, that);\n    },\n\n    playMV(mvId) {\n      //获取mv播放链接\n      this.$router.push({\n        name: \"mvPlay\",\n        params: {\n          mvId: mvId\n        }\n      });\n    },\n\n    //获取歌曲下载地址\n    getDownloadUrl(songId, songName) {\n      var that = this;\n      that.$message({\n        type: \"success\",\n        message: \"正在尝试下载\"\n      });\n      let params = {\n        id: songId\n      };\n      getDownloadUrl(params).then(res => {\n        // console.log('歌曲下载地址：', res.data)\n        // console.log(\"歌曲下载地址：\", res.data.data.url);\n        // download(res.data.data.url, songName)\n        download(res.data.data[0].url, songName);\n        that.$message({\n          type: \"success\",\n          message: \"开始下载了\"\n        });\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACAA;AACAC;AADA,GADA;;AAIAC;AACA;AACA,GANA;;AAOAC;AACA;AACAC;AACA;AACA;AACAC,2BADA;AAEAC;AACAC;AADA;AAFA;AAMA,KAVA;;AAWA;AACAC;AACA;AACAC,2BADA;AAEAC;AAFA;AAIAF;AAAAG;AAAAC;AAAA,SACAC,IADA,CACAC;AACA;AACAC;AACA,SAFA,EADA,CAIA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA,OAbA,EAcAC,KAdA,CAcAC;AACA;AACAF;AACA,SAFA;AAGA,OAlBA;AAmBA,KApCA;;AAqCA;AACAG;AACA;AACA;AACA;AACAA;AACA,KA3CA;;AA4CA;AACAC;AACA;AACA;AACA;AACAA;AACA,KAlDA;;AAmDAC;AACA;AACA;AACAf,sBADA;AAEAC;AAAAe;AAAA;AAFA;AAIA,KAzDA;;AA0DA;AACAC;AACA;AACAC;AACAC,uBADA;AAEAC;AAFA;AAIA;AACAd;AADA;AAGAW;AACA;AACA;AACA;AACAI;AACAH;AACAC,yBADA;AAEAC;AAFA;AAIA,OATA;AAUA;;AA9EA;AAPA","names":["props","songlist","data","methods","goSongDetails","name","params","songDetails","likeMusic","target","background","id","like","then","res","loading","catch","error","listenMusic","playMusic","playMV","mvId","getDownloadUrl","that","type","message","download"],"sourceRoot":"src/components","sources":["songlist.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"music-list\" v-for=\"(item, index) in songlist\" :key=\"item.id\">\n      <div style=\"width: 35px\">{{ index + 1 }}.</div>\n      <div @dblclick=\"goSongDetails(item)\" class=\"music-list-info\">\n        <div class=\"music-list-span\">{{ item.name }}</div>\n        <div class=\"music-list-span\">{{ item.ar[0].name }}</div>\n        <div class=\"music-list-span music-list-dt\">{{ item.dt }}</div>\n      </div>\n\n      <div class=\"option\">\n        <!-- 加入我的喜欢 -->\n        <span @click=\"likeMusic(item.id, true)\"\n          ><i class=\"iFont el-icon-star-on iconhover\"></i\n        ></span>\n        <!-- 从我的喜欢删除 -->\n        <span @click=\"likeMusic(item.id, false)\"\n          ><i class=\"iFont el-icon-star-off iconhover\"></i\n        ></span>\n        <!-- <i class=\"iFont el-icon-star-off\" @click=\"collectPlaylist\"></i> -->\n        <!-- 试听 -->\n        <span @click=\"listenMusic(item)\"\n          ><i class=\"el-icon-headset iconhover\"></i\n        ></span>\n        <!-- 添加到播放列表 -->\n        <span\n          v-if=\"item.fee == 0 || item.fee == 8\"\n          @click.stop=\"playMusic(item)\"\n          ><i class=\"el-icon-folder-add iconhover\"></i>\n        </span>\n        <!-- 播放MV -->\n        <span v-if=\"Boolean(item.mv)\" @click.stop=\"playMV(item.mv)\"\n          ><i class=\"el-icon-video-camera iconhover\"></i>\n        </span>\n        <!-- 下载 -->\n        <span\n          v-if=\"item.fee == 0 || item.fee == 8\"\n          @click=\"getDownloadUrl(item.id, item.name)\"\n        >\n          <i class=\"el-icon-download iconhover\"></i\n        ></span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getDownloadUrl } from \"@/api/api\";\nimport { playMusic, listenMusic } from \"@/utils/musicPlay\";\nimport { likeMusic } from \"@/api/needLogin/musicOperate\";\nimport { download } from \"@/utils/commonApi\";\nexport default {\n  props: {\n    songlist: Array,\n  },\n  data() {\n    return {};\n  },\n  methods: {\n    //获取歌曲详情,进入详情页面\n    goSongDetails(songDetails) {\n      // console.log('歌曲信息',songDetails)\n      this.$router.push({\n        name: \"songDetails\",\n        params: {\n          songDetails: songDetails,\n        },\n      });\n    },\n    //加入/删除喜欢音乐\n    likeMusic(id, bool) {\n      const loading = this.$loading({\n        target: \"#app_body\",\n        background: \"rgba(255,255,255,0.1)\",\n      });\n      likeMusic({ id: id, like: bool })\n        .then((res) => {\n          this.$nextTick(() => {\n            loading.close();\n          });\n          // console.log(\"添加\", res);\n          if (res.data.code === 200) {\n            if (bool) {\n              this.$message.success(\"已添加入我的喜欢-可进入网易云音乐查看\");\n              return;\n            }\n            this.$message.success(\"已从我的喜欢列表删除\");\n          }\n        })\n        .catch((error) => {\n          this.$nextTick(() => {\n            loading.close();\n          });\n        });\n    },\n    //试听音乐\n    listenMusic(songDetals) {\n      //获取播放音乐链接\n      var that = this;\n      var list = \"songlist\";\n      listenMusic(songDetals, that);\n    },\n    //添加歌曲到播放列表\n    playMusic(songDetals) {\n      //获取播放音乐链接\n      var that = this;\n      var list = \"songlist\";\n      playMusic(songDetals, that);\n    },\n    playMV(mvId) {\n      //获取mv播放链接\n      this.$router.push({\n        name: \"mvPlay\",\n        params: { mvId: mvId },\n      });\n    },\n    //获取歌曲下载地址\n    getDownloadUrl(songId, songName) {\n      var that = this;\n      that.$message({\n        type: \"success\",\n        message: \"正在尝试下载\",\n      });\n      let params = {\n        id: songId,\n      };\n      getDownloadUrl(params).then((res) => {\n        // console.log('歌曲下载地址：', res.data)\n        // console.log(\"歌曲下载地址：\", res.data.data.url);\n        // download(res.data.data.url, songName)\n        download(res.data.data[0].url, songName);\n        that.$message({\n          type: \"success\",\n          message: \"开始下载了\",\n        });\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" >\n.music-list {\n  position: relative;\n  display: flex;\n  align-content: center;\n  justify-content: space-around;\n  margin: 5px auto 5px;\n  padding: 0 15px;\n  width: 96%;\n  //   height: 30px;\n  //   line-height: 30px;\n  overflow: hidden;\n  color: rgba(255, 255, 255, 1);\n  font-weight: bolder;\n  border-radius: 5px;\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  background-color: rgba(99, 187, 162, 0.044);\n  border-radius: 15px;\n  transition: 0.2s;\n\n  .music-list-index {\n    position: absolute;\n    left: 0;\n    width: 5%;\n  }\n  .music-list-info {\n    display: flex;\n    align-content: center;\n    justify-content: space-between;\n    width: 70%;\n\n    .music-list-span,\n    .music-list-dt {\n      text-align: center;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n    .music-list-span {\n      width: 40%;\n    }\n    .music-list-dt {\n      width: 25%;\n      // font-size:13px;\n      text-align: center;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  }\n\n  .option {\n    display: inline-block;\n    margin-left: 2%;\n    width: 15%;\n    box-sizing: border-box;\n\n    span {\n      display: inline-block;\n      width: 15%;\n      &:hover {\n        cursor: pointer;\n      }\n    }\n  }\n\n  &:hover {\n    color: rgb(88, 255, 241);\n    transform: scale(1.01);\n    // background: rgba(141, 251, 255, 0.192);\n  }\n}\n</style>"]},"metadata":{},"sourceType":"module"}