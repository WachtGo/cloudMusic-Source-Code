{"ast":null,"code":"import _asyncToGenerator from \"D:/Desktop/git/cloudMusic-Source-Code/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { playMusicUrl, getSongLyric, getSongDetails } from \"@/api/api\"; //添加歌曲到播放列表\n\nexport function playMusic(_x, _x2, _x3, _x4, _x5, _x6) {\n  return _playMusic.apply(this, arguments);\n} //播放试听音乐\n\nfunction _playMusic() {\n  _playMusic = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(id, fee, index, list, that, noCopyrightRcmd) {\n    var songlrc;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            //获取播放音乐链接\n            console.log(that, '----');\n            songlrc = ''; //歌词 \n\n            if (!that[list][index].timer) {\n              _context.next = 10;\n              break;\n            }\n\n            if (!noCopyrightRcmd) {\n              _context.next = 8;\n              break;\n            }\n\n            that.$message({\n              message: \"这首歌暂无版权\",\n              type: \"error\"\n            });\n            that[list][index].timer = false;\n            setTimeout(function () {\n              that[list][index].timer = true;\n            }, 3000);\n            return _context.abrupt(\"return\");\n\n          case 8:\n            if (fee == 1) {\n              that.$message({\n                message: \"VIP歌曲 - 只能试听30s\",\n                type: \"warning\"\n              });\n            } // 获取歌词\n\n\n            getSongLyric({\n              id: id\n            }).then(function (res) {\n              songlrc = res.data.lrc.lyric;\n            }), // 获取歌曲信息\n            getSongDetails({\n              ids: id\n            }).then(function (res) {\n              that.$store.commit(\"aplayer/addSONG\", {\n                name: res.data.songs[0].name,\n                //歌曲名\n                artist: res.data.songs[0].ar[0].name,\n                //作者\n                // url: songUrlAdd,\n                url: \"https://music.163.com/song/media/outer/url?id=\".concat(id, \".mp3\"),\n                cover: res.data.songs[0].al.picUrl,\n                lrc: songlrc,\n                id: id\n              });\n              that[list][index].timer = false;\n              setTimeout(function () {\n                that[list][index].timer = true;\n              }, 3000);\n            });\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _playMusic.apply(this, arguments);\n}\n\nexport function listenMusic(id, fee, index, list, that, noCopyrightRcmd) {\n  var songUrlAdd = null;\n  var songlrc = '';\n\n  if (that[list][index].timer) {\n    if (noCopyrightRcmd) {\n      that.$message({\n        message: \"这首歌暂无版权\",\n        type: \"error\"\n      });\n      that[list][index].timer = false;\n      setTimeout(function () {\n        that[list][index].timer = true;\n      }, 3000);\n      return;\n    }\n\n    if (fee == 1) {\n      that.$message({\n        message: \"VIP歌曲 - 只能试听30s\",\n        type: \"warning\"\n      });\n    }\n\n    playMusicUrl({\n      id: id\n    }).then(function (res) {\n      // console.log(\"播放音乐链接\", res.data.data[0].url);\n      if (res.data.data[0].url) {\n        songUrlAdd = res.data.data[0].url;\n      }\n    }), // 获取歌词\n    getSongLyric({\n      id: id\n    }).then(function (res) {\n      songlrc = res.data.lrc.lyric;\n    }), // 获取歌曲信息\n    getSongDetails({\n      ids: id\n    }).then(function (res) {\n      if (songUrlAdd != null) {\n        that.$store.commit('aplayer/addAUDITION', {\n          name: res.data.songs[0].name,\n          //歌曲名\n          artist: res.data.songs[0].ar[0].name,\n          //作者\n          url: songUrlAdd,\n          cover: res.data.songs[0].al.picUrl,\n          lrc: songlrc,\n          id: id,\n          timer: true //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\n\n        });\n      }\n\n      that[list][index].timer = false;\n      setTimeout(function () {\n        that[list][index].timer = true;\n      }, 3000);\n    });\n  }\n}","map":{"version":3,"sources":["D:/Desktop/git/cloudMusic-Source-Code/src/utils/musicPlay.js"],"names":["playMusicUrl","getSongLyric","getSongDetails","playMusic","id","fee","index","list","that","noCopyrightRcmd","console","log","songlrc","timer","$message","message","type","setTimeout","then","res","data","lrc","lyric","ids","$store","commit","name","songs","artist","ar","url","cover","al","picUrl","listenMusic","songUrlAdd"],"mappings":"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","sourcesContent":["import {\r\n  playMusicUrl,\r\n  getSongLyric,\r\n  getSongDetails,\r\n} from \"@/api/api\";\r\n\r\n //添加歌曲到播放列表\r\n export async function  playMusic (id, fee, index , list, that, noCopyrightRcmd){\r\n\t//获取播放音乐链接\r\n\tconsole.log(that,'----')\r\n\tlet songlrc = '' //歌词 \r\n\tif (that[list][index].timer) {\r\n\t\t\r\n\t\t\r\n\t\t\tif (noCopyrightRcmd) {\r\n\t\t\t\tthat.$message({\r\n\t\t\t\t\tmessage: \"这首歌暂无版权\",\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t});\r\n\t\t\t\tthat[list][index].timer = false;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthat[list][index].timer = true;\r\n\t\t\t\t}, 3000);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (fee == 1) {\r\n\t\t\t\tthat.$message({\r\n\t\t\t\t\tmessage: \"VIP歌曲 - 只能试听30s\",\r\n\t\t\t\t\ttype: \"warning\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// 获取歌词\r\n\t\t\tgetSongLyric({\r\n\t\t\t\tid: id,\r\n\t\t\t}).then((res) => {\r\n\t\t\t\tsonglrc = res.data.lrc.lyric;\r\n\t\t\t}),\r\n\t\t\t// 获取歌曲信息\r\n\t\t\tgetSongDetails({\r\n\t\t\t\tids: id,\r\n\t\t\t}).then((res) => {\r\n\t\t\t\t\tthat.$store.commit(\"aplayer/addSONG\", {\r\n\t\t\t\t\t\tname: res.data.songs[0].name, //歌曲名\r\n\t\t\t\t\t\tartist: res.data.songs[0].ar[0].name, //作者\r\n\t\t\t\t\t\t// url: songUrlAdd,\r\n\t\t\t\t\t\turl:`https://music.163.com/song/media/outer/url?id=${id}.mp3`,\r\n\t\t\t\t\t\tcover: res.data.songs[0].al.picUrl,\r\n\t\t\t\t\t\tlrc: songlrc,\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthat[list][index].timer = false;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthat[list][index].timer = true;\r\n\t\t\t\t\t}, 3000);\r\n\t\t\t});\r\n\t}\r\n}\r\n\t\r\n//播放试听音乐\r\nexport function  listenMusic (id, fee, index, list, that, noCopyrightRcmd) {\r\n\tlet songUrlAdd = null\r\n\tlet songlrc = ''\r\n\tif (that[list][index].timer) {\r\n\t\tif(noCopyrightRcmd){\r\n\t\t\t\r\n\t\t\t\tthat.$message({\r\n\t\t\t\t\tmessage: \"这首歌暂无版权\",\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t});\r\n\t\t\t\tthat[list][index].timer = false;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthat[list][index].timer = true;\r\n\t\t\t\t}, 3000);\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t}\r\n\t if (fee == 1) {\r\n\t\t\tthat.$message({\r\n\t\t\t\tmessage: \"VIP歌曲 - 只能试听30s\",\r\n\t\t\t\ttype: \"warning\",\r\n\t\t\t});\r\n\t\t}\r\n\t\tplayMusicUrl({\r\n\t\t\tid: id,\r\n\t\t}).then((res) => {\r\n\t\t\t// console.log(\"播放音乐链接\", res.data.data[0].url);\r\n\t\t\tif (res.data.data[0].url) {\r\n\t\t\t\tsongUrlAdd = res.data.data[0].url;\r\n\t\t\t} \r\n\t\t}),\r\n\t\t\t// 获取歌词\r\n\t\t\tgetSongLyric({\r\n\t\t\t\tid: id,\r\n\t\t\t}).then((res) => {\r\n\t\t\t \tsonglrc = res.data.lrc.lyric;\r\n\t\t\t}),\r\n\t\t\t// 获取歌曲信息\r\n\t\t\tgetSongDetails({\r\n\t\t\t\tids: id,\r\n\t\t\t}).then((res) => {\r\n\t\t\t\tif (songUrlAdd != null) {\r\n\t\t\t\t\tthat.$store.commit('aplayer/addAUDITION',{\r\n\t\t\t\t\t\tname: res.data.songs[0].name, //歌曲名\r\n\t\t\t\t\t\tartist: res.data.songs[0].ar[0].name, //作者\r\n\t\t\t\t\t\turl: songUrlAdd,\r\n\t\t\t\t\t\tcover: res.data.songs[0].al.picUrl,\r\n\t\t\t\t\t\tlrc: songlrc,\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\ttimer:true//试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\r\n\t\t\t\t\t});}\r\n\t\t\t\t\tthat[list][index].timer = false;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthat[list][index].timer = true;\r\n\t\t\t\t\t}, 3000);\r\n\t\t\t});\r\n\t\t}\r\n}"]},"metadata":{},"sourceType":"module"}