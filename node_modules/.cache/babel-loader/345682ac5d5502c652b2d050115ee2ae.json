{"ast":null,"code":"import _asyncToGenerator from \"D:/data/\\u684C\\u9762/git/cloudMusic-Source-Code/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { playMusicUrl, getSongLyric } from \"@/api/api\"; //添加歌曲到播放列表\n\nexport function playMusic(_x, _x2) {\n  return _playMusic.apply(this, arguments);\n} //播放试听音乐\n\nfunction _playMusic() {\n  _playMusic = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(songDetals, that) {\n    var songlrc;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            //获取播放音乐链接\n            // console.log(songDetals, \"歌曲信息----\");\n            songlrc = \"\"; //歌词\n\n            if (!songDetals.timer) {\n              _context.next = 11;\n              break;\n            }\n\n            if (!songDetals.noCopyrightRcmd) {\n              _context.next = 7;\n              break;\n            }\n\n            that.$message({\n              message: \"这首歌暂无版权\",\n              type: \"error\"\n            });\n            songDetals.timer = false;\n            setTimeout(function () {\n              songDetals.timer = true;\n            }, 3000);\n            return _context.abrupt(\"return\");\n\n          case 7:\n            if (songDetals.fee == 1) {\n              that.$message({\n                message: \"VIP歌曲 - 只能试听30s\",\n                type: \"warning\"\n              });\n            } // 获取歌词\n            // getSongLyric({\n            //   id: id,\n            // }).then((res) => {\n            //   songlrc = res.data.lrc.lyric;\n            // }),\n\n\n            that.$store.commit(\"aplayer/addSONG\", {\n              name: songDetals.name,\n              //歌曲名\n              artist: songDetals.ar[0].name,\n              //作者\n              // url: songUrlAdd,\n              url: \"https://music.163.com/song/media/outer/url?id=\".concat(songDetals.id, \".mp3\"),\n              cover: songDetals.al.picUrl,\n              //   lrc: songlrc,\n              id: songDetals.id\n            });\n            songDetals.timer = false;\n            setTimeout(function () {\n              songDetals.timer = true;\n            }, 3000);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _playMusic.apply(this, arguments);\n}\n\nexport function listenMusic(_x3, _x4) {\n  return _listenMusic.apply(this, arguments);\n}\n\nfunction _listenMusic() {\n  _listenMusic = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(songDetals, that) {\n    var songUrlAdd, songlrc;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            // console.log(songDetals, \"歌曲信息----\");\n            songUrlAdd = null;\n            songlrc = \"\";\n\n            if (!songDetals.timer) {\n              _context2.next = 17;\n              break;\n            }\n\n            if (!songDetals.noCopyrightRcmd) {\n              _context2.next = 8;\n              break;\n            }\n\n            that.$message({\n              message: \"这首歌暂无版权\",\n              type: \"error\"\n            });\n            songDetals.timer = false;\n            setTimeout(function () {\n              songDetals.timer = true;\n            }, 3000);\n            return _context2.abrupt(\"return\");\n\n          case 8:\n            if (!(songDetals.fee == 1)) {\n              _context2.next = 14;\n              break;\n            }\n\n            that.$message({\n              message: \"VIP歌曲 - 只能试听30s\",\n              type: \"warning\"\n            });\n            _context2.next = 12;\n            return playMusicUrl({\n              id: songDetals.id\n            }).then(function (res) {\n              // console.log(\"播放音乐链接\", res.data.data[0].url);\n              if (res.data.data[0].url) {\n                songUrlAdd = res.data.data[0].url;\n\n                if (songUrlAdd != null) {\n                  that.$store.commit(\"aplayer/addAUDITION\", {\n                    name: songDetals.name,\n                    //歌曲名\n                    artist: songDetals.ar[0].name,\n                    //作者\n                    url: songUrlAdd,\n                    cover: songDetals.al.picUrl,\n                    // lrc: songlrc,\n                    id: songDetals.id,\n                    timer: true //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\n\n                  });\n                }\n              }\n            });\n\n          case 12:\n            _context2.next = 15;\n            break;\n\n          case 14:\n            if (songDetals.fee == 0 || songDetals.fee == 8) {\n              that.$store.commit(\"aplayer/addAUDITION\", {\n                name: songDetals.name,\n                //歌曲名\n                artist: songDetals.ar[0].name,\n                //作者\n                // url: songUrlAdd,\n                url: \"https://music.163.com/song/media/outer/url?id=\".concat(songDetals.id, \".mp3\"),\n                cover: songDetals.al.picUrl,\n                // lrc: songlrc,\n                id: songDetals.id,\n                timer: true //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\n\n              });\n            }\n\n          case 15:\n            songDetals.timer = false;\n            setTimeout(function () {\n              songDetals.timer = true;\n            }, 3000);\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _listenMusic.apply(this, arguments);\n}","map":{"version":3,"sources":["D:/data/桌面/git/cloudMusic-Source-Code/src/utils/musicPlay.js"],"names":["playMusicUrl","getSongLyric","playMusic","songDetals","that","songlrc","timer","noCopyrightRcmd","$message","message","type","setTimeout","fee","$store","commit","name","artist","ar","url","id","cover","al","picUrl","listenMusic","songUrlAdd","then","res","data"],"mappings":"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","sourcesContent":["import { playMusicUrl, getSongLyric } from \"@/api/api\";\r\n\r\n//添加歌曲到播放列表\r\nexport async function playMusic(songDetals, that) {\r\n  //获取播放音乐链接\r\n  // console.log(songDetals, \"歌曲信息----\");\r\n  let songlrc = \"\"; //歌词\r\n  if (songDetals.timer) {\r\n    if (songDetals.noCopyrightRcmd) {\r\n      that.$message({\r\n        message: \"这首歌暂无版权\",\r\n        type: \"error\",\r\n      });\r\n      songDetals.timer = false;\r\n      setTimeout(() => {\r\n        songDetals.timer = true;\r\n      }, 3000);\r\n      return;\r\n    }\r\n    if (songDetals.fee == 1) {\r\n      that.$message({\r\n        message: \"VIP歌曲 - 只能试听30s\",\r\n        type: \"warning\",\r\n      });\r\n    }\r\n    // 获取歌词\r\n    // getSongLyric({\r\n    //   id: id,\r\n    // }).then((res) => {\r\n    //   songlrc = res.data.lrc.lyric;\r\n    // }),\r\n    that.$store.commit(\"aplayer/addSONG\", {\r\n      name: songDetals.name, //歌曲名\r\n      artist: songDetals.ar[0].name, //作者\r\n      // url: songUrlAdd,\r\n      url: `https://music.163.com/song/media/outer/url?id=${songDetals.id}.mp3`,\r\n      cover: songDetals.al.picUrl,\r\n      //   lrc: songlrc,\r\n      id: songDetals.id,\r\n    });\r\n    songDetals.timer = false;\r\n    setTimeout(() => {\r\n      songDetals.timer = true;\r\n    }, 3000);\r\n  }\r\n}\r\n\r\n//播放试听音乐\r\nexport async function listenMusic(songDetals, that) {\r\n  // console.log(songDetals, \"歌曲信息----\");\r\n  let songUrlAdd = null;\r\n  let songlrc = \"\";\r\n  if (songDetals.timer) {\r\n    if (songDetals.noCopyrightRcmd) {\r\n      that.$message({\r\n        message: \"这首歌暂无版权\",\r\n        type: \"error\",\r\n      });\r\n      songDetals.timer = false;\r\n      setTimeout(() => {\r\n        songDetals.timer = true;\r\n      }, 3000);\r\n      return;\r\n    }\r\n    if (songDetals.fee == 1) {\r\n      that.$message({\r\n        message: \"VIP歌曲 - 只能试听30s\",\r\n        type: \"warning\",\r\n      });\r\n      await playMusicUrl({\r\n        id: songDetals.id,\r\n      }).then((res) => {\r\n        // console.log(\"播放音乐链接\", res.data.data[0].url);\r\n        if (res.data.data[0].url) {\r\n          songUrlAdd = res.data.data[0].url;\r\n          if (songUrlAdd != null) {\r\n            that.$store.commit(\"aplayer/addAUDITION\", {\r\n              name: songDetals.name, //歌曲名\r\n              artist: songDetals.ar[0].name, //作者\r\n              url: songUrlAdd,\r\n              cover: songDetals.al.picUrl,\r\n              // lrc: songlrc,\r\n              id: songDetals.id,\r\n              timer: true, //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\r\n            });\r\n          }\r\n        }\r\n      });\r\n      // 获取歌词\r\n      //   getSongLyric({\r\n      //     id: id,\r\n      //   }).then((res) => {\r\n      //     songlrc = res.data.lrc.lyric;\r\n      //   });\r\n    } else if (songDetals.fee == 0 || songDetals.fee == 8) {\r\n      that.$store.commit(\"aplayer/addAUDITION\", {\r\n        name: songDetals.name, //歌曲名\r\n        artist: songDetals.ar[0].name, //作者\r\n        // url: songUrlAdd,\r\n        url: `https://music.163.com/song/media/outer/url?id=${songDetals.id}.mp3`,\r\n        cover: songDetals.al.picUrl,\r\n        // lrc: songlrc,\r\n        id: songDetals.id,\r\n        timer: true, //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\r\n      });\r\n    }\r\n    songDetals.timer = false;\r\n    setTimeout(() => {\r\n      songDetals.timer = true;\r\n    }, 3000);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}