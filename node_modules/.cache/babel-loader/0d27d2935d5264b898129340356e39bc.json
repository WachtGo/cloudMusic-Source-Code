{"ast":null,"code":"import _asyncToGenerator from \"D:/Desktop/git/cloudMusic-Source-Code/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"D:/Desktop/git/cloudMusic-Source-Code/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"regenerator-runtime/runtime.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapMutations, mapState } from 'vuex';\nimport { getSongDetails } from '@/api/api';\nimport { playMusic } from '@/utils/musicPlay';\nexport default {\n  data: function data() {\n    return {};\n  },\n  computed: _objectSpread({}, mapState('aplayer', ['audio', 'audition', 'musicAudioStatu'])),\n  mounted: function mounted() {},\n  methods: _objectSpread(_objectSpread({}, mapMutations('aplayer', ['deleteMUSIC', 'deleteAUDITION', 'changeAPLAYER'])), {}, {\n    //播放指定歌曲\n    playMusic: function playMusic(idx) {\n      this.changeAPLAYER(0); //切换播放器\n\n      var aplayer = this.$refs.aplayer; //获取当前播放器\n\n      aplayer.switch(idx); //切换到播放当前下标的歌曲\n\n      aplayer.toggle(); //切换播放/暂停\n    },\n    //删除歌曲\n    deleteMusic: function deleteMusic(idx) {\n      // this.$store.commit('deleteMusic',idx)\n      this.deleteMUSIC(idx);\n    },\n    //试听的播放/暂停\n    playAudition: function playAudition(idx) {\n      this.changeAPLAYER(1); //切换到试听播放器\n\n      var auditions = this.$refs.auditions; //获取当前播放器\n\n      auditions.switch(idx); //切换到播放当前下标的歌曲\n\n      auditions.toggle(); //切换播放/暂停\n    },\n    //删除试听\n    deleteAudition: function deleteAudition(idx) {\n      this.deleteAUDITION(idx);\n    },\n    //添加到播放列表\n    addListenMusic: function addListenMusic(id) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var that, list;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                that = _this;\n                list = 'audition';\n                _context.next = 4;\n                return getSongDetails({\n                  ids: id\n                }).then(function (res) {\n                  playMusic(id, res.data.songs[0].fee, 0, list, that);\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  }),\n  directives: {\n    drag: function drag(el) {\n      // let dragBox = el.parentElement.parentElement; //获取移动的元素\n      var dragBox = document.getElementsByClassName('musicWrap');\n\n      el.onmousedown = function (e) {\n        //鼠标点击时鼠标的的位置\n        // console.log(e)\n        // console.log(el.parentElement)\n        var downX = e.clientX;\n        var downY = e.clientY; //元素位置\n\n        var left = dragBox[0].offsetLeft;\n        var top = dragBox[0].offsetTop; // console.log(e.clientX,e.clientY)\n        // console.log('app位置：',dragBox.offsetLeft,dragBox.offsetTop)\n\n        document.onmousemove = function (e) {\n          //鼠标移动的距离\n          var moveX = e.clientX - downX;\n          var moveY = e.clientY - downY; // console.log('鼠标移动:',moveX,moveY)\n          //移动当前元素\n\n          dragBox[0].style.left = left + moveX + 'px';\n          dragBox[0].style.top = top + moveY + 'px';\n        };\n\n        document.onmouseup = function (e) {\n          //鼠标弹起来的时候不再移动\n          document.onmousemove = null; //预防鼠标弹起来后还会循环（即预防鼠标放上去的时候还会移动）\n\n          document.onmouseup = null;\n        };\n      };\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACAA,MADA,kBACA;AACA;AACA,GAHA;AAIAC,8BACAC,6DADA,CAJA;AAOAC,SAPA,qBAOA,EAPA;AASAC,2CACAC,yBACA,aADA,EAEA,gBAFA,EAGA,eAHA,EADA;AAOA;AACAC,aARA,qBAQAC,GARA,EAQA;AACA,4BADA,CACA;;AACA,uCAFA,CAEA;;AACAC,0BAHA,CAGA;;AACAA,uBAJA,CAIA;AACA,KAbA;AAcA;AACAC,eAfA,uBAeAF,GAfA,EAeA;AACA;AACA;AACA,KAlBA;AAmBA;AACAG,gBApBA,wBAoBAH,GApBA,EAoBA;AACA,4BADA,CACA;;AACA,2CAFA,CAEA;;AACAI,4BAHA,CAGA;;AACAA,yBAJA,CAIA;AACA,KAzBA;AA0BA;AACAC,kBA3BA,0BA2BAL,GA3BA,EA2BA;AACA;AACA,KA7BA;AA8BA;AACAM,kBA/BA,0BA+BAC,EA/BA,EA+BA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACAC,oBADA,GACA,KADA;AAEAC,oBAFA,GAEA,UAFA;AAAA;AAAA,uBAGAC;AAAAC;AAAA;AACAZ;AACA,iBAFA,CAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AArCA,IATA;AAgDAa;AACAC,QADA,gBACAC,EADA,EACA;AACA;AACA;;AACAA;AACA;AACA;AACA;AACA;AACA,8BALA,CAMA;;AACA;AACA,uCARA,CASA;AACA;;AACAC;AACA;AACA;AACA,wCAHA,CAIA;AAEA;;AACAC;AACAA;AACA,SATA;;AAUAD;AACA;AACAA,sCAFA,CAGA;;AACAA;AACA,SALA;AAMA,OA3BA;AA4BA;AAhCA;AAhDA","names":["data","computed","mapState","mounted","methods","mapMutations","playMusic","idx","aplayer","deleteMusic","playAudition","auditions","deleteAudition","addListenMusic","id","that","list","getSongDetails","ids","directives","drag","el","document","dragBox"],"sourceRoot":"src/components","sources":["aplayer.vue"],"sourcesContent":["<template >\r\n  <!--music：当前播放的音乐。 list：播放列表 ：showlrc：是否显示歌词-->\r\n  <div id=\"aplayerWrap\">\r\n    <ul class=\"musicWrap\">\r\n      <div v-if=\"audio.length !== 0\"\r\n           class=\"listTitle\"\r\n           v-drag\r\n           style=\"text-align: center\">\r\n        播放列表\r\n      </div>\r\n      <div class=\"wrapShow\">\r\n        <li class=\"musicLi\"\r\n            v-for=\"(item, index) in audio\"\r\n            :key=\"item.id\"\r\n            @click.self=\"playMusic(index)\">\r\n          <span>{{ index + 1 }}.</span>&nbsp;\r\n          <span class=\"musicName\">{{ item.name }}</span>\r\n          <span class=\"artist\">{{ item.artist }}</span>\r\n          <span class=\"delete\"\r\n                @click.stop=\"deleteMusic(index)\"><i class=\"el-icon-delete iconhover\"></i></span>\r\n        </li>\r\n      </div>\r\n    </ul>\r\n    <div class=\"audition\"\r\n         v-if=\"audition.length!==0\">\r\n      <div class=\"inline-block\"\r\n           style=\"margin:0 auto;\"\r\n           v-for=\"(item ,index) in audition\"\r\n           :key='item.id'>\r\n        <div class=\"auditionTitle\">正在试听:</div>\r\n        <div class='auditionMusic'\r\n             @click=\"playAudition(index)\">\r\n          <span class=\"inline-block auditionName\">{{ item.name }}</span>\r\n          <span class=\"inline-block auditionArtist\">{{ item.artist }}</span>\r\n\r\n          <span class=\"inline-block auditionDelete\"\r\n                @click.stop=\"deleteAudition(index)\"><i class=\"el-icon-delete iconhover\"></i></span>\r\n          <span class=\"inline-block auditionAdd\"\r\n                @click.stop=\"addListenMusic(item.id)\"><i class=\"el-icon-folder-add iconhover\"></i></span>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n    <aplayer v-if=\"audio.length !== 0 && musicAudioStatu === 0 \"\r\n             fixed\r\n             ref=\"aplayer\"\r\n             :audio=\"audio\"\r\n             :lrcType=\"1\"\r\n             style=\"color: rgb(120, 120, 120)\">\r\n    </aplayer>\r\n\r\n    <div v-if=\"audition.length !== 0 && musicAudioStatu === 1 \">\r\n      <aplayer autoplay\r\n               :fixed=\"true\"\r\n               ref=\"auditions\"\r\n               :audio=\"audition\"\r\n               :liric-type=\"1\"></aplayer>\r\n    </div>\r\n\r\n  </div>\r\n\r\n</template>\r\n<script>\r\nimport { mapMutations, mapState } from 'vuex'\r\nimport { getSongDetails } from '@/api/api'\r\nimport { playMusic } from '@/utils/musicPlay'\r\nexport default {\r\n  data() {\r\n    return {}\r\n  },\r\n  computed: {\r\n    ...mapState('aplayer', ['audio', 'audition', 'musicAudioStatu']),\r\n  },\r\n  mounted() {},\r\n\r\n  methods: {\r\n    ...mapMutations('aplayer', [\r\n      'deleteMUSIC',\r\n      'deleteAUDITION',\r\n      'changeAPLAYER',\r\n    ]),\r\n\r\n    //播放指定歌曲\r\n    playMusic(idx) {\r\n      this.changeAPLAYER(0) //切换播放器\r\n      let aplayer = this.$refs.aplayer //获取当前播放器\r\n      aplayer.switch(idx) //切换到播放当前下标的歌曲\r\n      aplayer.toggle() //切换播放/暂停\r\n    },\r\n    //删除歌曲\r\n    deleteMusic(idx) {\r\n      // this.$store.commit('deleteMusic',idx)\r\n      this.deleteMUSIC(idx)\r\n    },\r\n    //试听的播放/暂停\r\n    playAudition(idx) {\r\n      this.changeAPLAYER(1) //切换到试听播放器\r\n      let auditions = this.$refs.auditions //获取当前播放器\r\n      auditions.switch(idx) //切换到播放当前下标的歌曲\r\n      auditions.toggle() //切换播放/暂停\r\n    },\r\n    //删除试听\r\n    deleteAudition(idx) {\r\n      this.deleteAUDITION(idx)\r\n    },\r\n    //添加到播放列表\r\n    async addListenMusic(id) {\r\n      let that = this\r\n      let list = 'audition'\r\n      await getSongDetails({ ids: id }).then((res) => {\r\n        playMusic(id, res.data.songs[0].fee, 0, list, that)\r\n      })\r\n    },\r\n  },\r\n  directives: {\r\n    drag(el) {\r\n      // let dragBox = el.parentElement.parentElement; //获取移动的元素\r\n      let dragBox = document.getElementsByClassName('musicWrap')\r\n      el.onmousedown = (e) => {\r\n        //鼠标点击时鼠标的的位置\r\n        // console.log(e)\r\n        // console.log(el.parentElement)\r\n        let downX = e.clientX\r\n        let downY = e.clientY\r\n        //元素位置\r\n        let left = dragBox[0].offsetLeft\r\n        let top = dragBox[0].offsetTop\r\n        // console.log(e.clientX,e.clientY)\r\n        // console.log('app位置：',dragBox.offsetLeft,dragBox.offsetTop)\r\n        document.onmousemove = (e) => {\r\n          //鼠标移动的距离\r\n          let moveX = e.clientX - downX\r\n          let moveY = e.clientY - downY\r\n          // console.log('鼠标移动:',moveX,moveY)\r\n\r\n          //移动当前元素\r\n          dragBox[0].style.left = left + moveX + 'px'\r\n          dragBox[0].style.top = top + moveY + 'px'\r\n        }\r\n        document.onmouseup = (e) => {\r\n          //鼠标弹起来的时候不再移动\r\n          document.onmousemove = null\r\n          //预防鼠标弹起来后还会循环（即预防鼠标放上去的时候还会移动）\r\n          document.onmouseup = null\r\n        }\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style lang=\"less\">\r\n.musicWrap {\r\n  position: relative;\r\n  width: 400px;\r\n  max-height: 16px;\r\n  top: 3%;\r\n  left: 0;\r\n  border-radius: 5px;\r\n  color: #ccc;\r\n  // background: rgba(243, 242, 242, 0.336);\r\n  overflow-x: hidden;\r\n\r\n  .listTitle {\r\n    position: relative;\r\n    font-size: 13px;\r\n    text-align: center;\r\n    transition: 0.8s;\r\n    &:hover {\r\n      // display: none;\r\n      cursor: default;\r\n      // color: rgb(253, 253, 253);\r\n      transform: scale(1.02);\r\n    }\r\n  }\r\n  .wrapShow {\r\n    width: 100%;\r\n    // max-height: 17px;\r\n    top: 8%;\r\n    left: 10px;\r\n    border-radius: 5px;\r\n    // color: rgba(48, 46, 46, 0.548) !important;\r\n    background: rgba(160, 160, 160, 0.096);\r\n    overflow-x: hidden;\r\n    transition: 0.8s;\r\n    &:hover {\r\n      // cursor: pointer;\r\n      max-height: 480px;\r\n      // color: rgb(30, 205, 236) !important;\r\n      // transform: scale(1.03);\r\n    }\r\n    &::-webkit-scrollbar {\r\n      display: none;\r\n    }\r\n\r\n    .musicLi {\r\n      position: relative;\r\n      padding: 2px 10px;\r\n      transition: 0.3s;\r\n      &:hover {\r\n        cursor: pointer;\r\n        color: rgb(29, 236, 167);\r\n        transform: scale(1.02);\r\n      }\r\n      // .musicName,\r\n      // .artist {\r\n      //   &:hover {\r\n      //     color: aquamarine;\r\n      //   }\r\n      // }\r\n      .artist {\r\n        position: absolute;\r\n        right: 30px;\r\n      }\r\n      .delete {\r\n        position: absolute;\r\n        right: 5px;\r\n      }\r\n    }\r\n  }\r\n\r\n  &:hover {\r\n    // cursor: pointer;\r\n    max-height: 500px;\r\n    // color: rgb(30, 205, 236);\r\n    // transform: scale(1.03);\r\n  }\r\n  &::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n}\r\n.audition {\r\n  position: fixed;\r\n  width: 500px;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin: auto;\r\n  height: 18px;\r\n  color: #ccc;\r\n  // color: rgba(218, 218, 218, 0.842);\r\n\r\n  transition: 0.2s;\r\n  .auditionTitle {\r\n    position: relative;\r\n    display: inline-block;\r\n    font-size: 13px;\r\n    margin-right: 10px;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n  }\r\n  .auditionMusic {\r\n    // position: relative;\r\n    display: inline-block;\r\n    font-size: 13px;\r\n    transition: 0.2s;\r\n    &:hover {\r\n      // color: aqua;\r\n      color: rgb(29, 236, 167);\r\n    }\r\n    .auditionName {\r\n      width: 300px;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n    }\r\n    .auditionArtist {\r\n      width: 90px;\r\n      text-align: center;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n      &::-webkit-scrollbar {\r\n        display: none;\r\n      }\r\n    }\r\n    .auditionDelete {\r\n      width: 22px;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n    }\r\n    .auditionAdd {\r\n      width: 22px;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n    }\r\n  }\r\n  &:hover {\r\n    cursor: pointer;\r\n    transform: scale(1.01);\r\n  }\r\n}\r\n.bgmusicWrap {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 5px;\r\n  width: 250px;\r\n  color: #ccc;\r\n  max-height: 20px;\r\n  overflow: hidden;\r\n  transition: 0.3s;\r\n  &:hover {\r\n    max-height: 200px;\r\n  }\r\n  .bgmusic-ul {\r\n    width: 100%;\r\n    // height: 20px;\r\n    // max-height: 20px;\r\n    text-align: center;\r\n    // overflow: hidden;\r\n    // background: rgb(190, 190, 189);\r\n    transition: 0.2s;\r\n    // &:hover {\r\n    //   max-height: 100%;\r\n    // }\r\n\r\n    .bgmusic-li {\r\n      height: 20px;\r\n      padding: 0 10px;\r\n      border-radius: 10px;\r\n      background: rgba(160, 160, 160, 0.096);\r\n      transition: 0.2s;\r\n      &:hover {\r\n        cursor: pointer;\r\n        color: rgb(29, 236, 167);\r\n        transform: scale(1.01);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.iconhover {\r\n  transition: 0.3s;\r\n  &:hover {\r\n    cursor: pointer;\r\n    color: rgb(238, 160, 57);\r\n  }\r\n}\r\n.aplayer {\r\n  .aplayer-body {\r\n    // height: 200px !important;\r\n    // .aplayer-pic {\r\n    // background-image: url(\"@/img/background.jpg\") !important;\r\n    // img {\r\n    //   width: 100px;\r\n    //   height: 100px;\r\n    // }\r\n\r\n    // background: rgba(247, 247, 253, 0.164);\r\n    // }\r\n    // .aplayer-info {\r\n    //   .aplayer-music {\r\n    //     .aplayer-title {\r\n    //       color: rgb(133, 130, 130);\r\n    //       transition: 0.2s;\r\n    //       &:hover {\r\n    //         color: turquoise;\r\n    //       }\r\n    //     }\r\n    //     .aplayer-author {\r\n    //       color: rgb(111, 114, 113);\r\n    //       transition: 0.2s;\r\n\r\n    //       &:hover {\r\n    //         color: turquoise;\r\n    //       }\r\n    //     }\r\n    //   }\r\n    //   .aplayer-lrc {\r\n    //     position: fixed;\r\n    //     top: 45px;\r\n    //     left: 0;\r\n    //     right: 0;\r\n    //     margin: auto;\r\n    //     // margin-right: 100px;\r\n    //     width: 350px;\r\n    //     height: 32px;\r\n    //     border-radius: 40px;\r\n    //     // background: rgba(179, 248, 241, 0.082) !important;\r\n    //     transition: 0.2s;\r\n    //     &:after {\r\n    //       background: none;\r\n    //     }\r\n    //     &:before {\r\n    //       background: none;\r\n    //     }\r\n    //     &:hover {\r\n    //       transform: scale(1.01);\r\n    //     }\r\n\r\n    //     background: transparent;\r\n    //     .aplayer-lrc-contents {\r\n    //       background: transparent;\r\n    //       .aplayer-lrc-current {\r\n    //         // height: 30px;\r\n    //         font-size: 16px;\r\n\r\n    //         color: rgba(248, 255, 254, 0.973);\r\n    //         background: transparent;\r\n    //         &:hover {\r\n    //           color: turquoise;\r\n    //         }\r\n    //       }\r\n    //       p {\r\n    //         color: rgb(255, 255, 255);\r\n    //         font-size: 14px;\r\n    //       }\r\n    //     }\r\n    //   }\r\n    // }\r\n  }\r\n  // .aplayer-list {\r\n  //   .aplayer-list-light {\r\n  //   }\r\n  //   .aplayer-list-cur {\r\n  //   }\r\n  // }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}