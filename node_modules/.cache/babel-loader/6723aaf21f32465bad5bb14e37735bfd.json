{"ast":null,"code":"import { playMusicUrl, getSongLyric } from \"@/api/api\"; //添加歌曲到播放列表\n\nexport function playMusic(songDetals, that) {\n  //获取播放音乐链接\n  // console.log(songDetals, \"歌曲信息----\");\n  let songlrc = \"\"; //歌词\n\n  if (songDetals.timer) {\n    if (songDetals.noCopyrightRcmd) {\n      that.$message({\n        message: \"这首歌暂无版权\",\n        type: \"error\"\n      });\n      songDetals.timer = false;\n      setTimeout(() => {\n        songDetals.timer = true;\n      }, 3000);\n      return;\n    }\n\n    if (songDetals.fee == 1) {\n      that.$message({\n        message: \"VIP歌曲 - 只能试听30s\",\n        type: \"warning\"\n      });\n    } // 获取歌词\n    // getSongLyric({\n    //   id: id,\n    // }).then((res) => {\n    //   songlrc = res.data.lrc.lyric;\n    // }),\n\n\n    that.$store.commit(\"aplayer/addSONG\", {\n      name: songDetals.name,\n      //歌曲名\n      artist: songDetals.ar[0].name,\n      //作者\n      // url: songUrlAdd,\n      url: `https://music.163.com/song/media/outer/url?id=${songDetals.id}.mp3`,\n      cover: songDetals.al.picUrl,\n      //   lrc: songlrc,\n      id: songDetals.id\n    });\n    songDetals.timer = false;\n    setTimeout(() => {\n      songDetals.timer = true;\n    }, 3000);\n  }\n} //播放试听音乐\n\nexport function listenMusic(songDetals, that) {\n  // console.log(songDetals, \"歌曲信息----\");\n  let songUrlAdd = null;\n  let songlrc = \"\";\n\n  if (songDetals.timer) {\n    if (songDetals.noCopyrightRcmd) {\n      that.$message({\n        message: \"这首歌暂无版权\",\n        type: \"error\"\n      });\n      songDetals.timer = false;\n      setTimeout(() => {\n        songDetals.timer = true;\n      }, 3000);\n      return;\n    }\n\n    if (songDetals.fee == 1) {\n      that.$message({\n        message: \"VIP歌曲 - 只能试听30s\",\n        type: \"warning\"\n      });\n      playMusicUrl({\n        id: songDetals.id\n      }).then(async res => {\n        // console.log(\"播放音乐链接\", res.data.data[0].url);\n        if (res.data.data[0].url) {\n          songUrlAdd = await res.data.data[0].url;\n\n          if (songUrlAdd != null) {\n            that.$store.commit(\"aplayer/addAUDITION\", {\n              name: songDetals.name,\n              //歌曲名\n              artist: songDetals.ar[0].name,\n              //作者\n              url: songUrlAdd,\n              cover: songDetals.al.picUrl,\n              // lrc: songlrc,\n              id: songDetals.id,\n              timer: true //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\n\n            });\n          }\n        }\n      }); // 获取歌词\n      //   getSongLyric({\n      //     id: id,\n      //   }).then((res) => {\n      //     songlrc = res.data.lrc.lyric;\n      //   });\n    } else if (songDetals.fee == 0 || songDetals.fee == 8) {\n      that.$store.commit(\"aplayer/addAUDITION\", {\n        name: songDetals.name,\n        //歌曲名\n        artist: songDetals.ar[0].name,\n        //作者\n        // url: songUrlAdd,\n        url: `https://music.163.com/song/media/outer/url?id=${songDetals.id}.mp3`,\n        cover: songDetals.al.picUrl,\n        // lrc: songlrc,\n        id: songDetals.id,\n        timer: true //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\n\n      });\n    }\n\n    songDetals.timer = false;\n    setTimeout(() => {\n      songDetals.timer = true;\n    }, 3000);\n  }\n}","map":null,"metadata":{},"sourceType":"module"}