{"ast":null,"code":"import _asyncToGenerator from \"D:/Desktop/git/cloudMusic-Source-Code/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { playMusicUrl, getSongLyric } from \"@/api/api\"; //添加歌曲到播放列表\n\nexport function playMusic(_x, _x2, _x3, _x4, _x5, _x6) {\n  return _playMusic.apply(this, arguments);\n} //播放试听音乐\n\nfunction _playMusic() {\n  _playMusic = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(id, fee, index, list, that, noCopyrightRcmd) {\n    var songlrc;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            //获取播放音乐链接\n            console.log(that[list][index], \"----\");\n            songlrc = \"\"; //歌词\n\n            if (!that[list][index].timer) {\n              _context.next = 13;\n              break;\n            }\n\n            if (!noCopyrightRcmd) {\n              _context.next = 8;\n              break;\n            }\n\n            that.$message({\n              message: \"这首歌暂无版权\",\n              type: \"error\"\n            });\n            that[list][index].timer = false;\n            setTimeout(function () {\n              that[list][index].timer = true;\n            }, 3000);\n            return _context.abrupt(\"return\");\n\n          case 8:\n            if (fee == 1) {\n              that.$message({\n                message: \"VIP歌曲 - 只能试听30s\",\n                type: \"warning\"\n              });\n            } // 获取歌词\n            // getSongLyric({\n            //   id: id,\n            // }).then((res) => {\n            //   songlrc = res.data.lrc.lyric;\n            // }),\n\n\n            console.log(res.data, '歌曲信息----');\n            that.$store.commit(\"aplayer/addSONG\", {\n              name: that[list][index].name,\n              //歌曲名\n              artist: that[list][index].ar[0].name,\n              //作者\n              // url: songUrlAdd,\n              url: \"https://music.163.com/song/media/outer/url?id=\".concat(id, \".mp3\"),\n              cover: that[list][index].al.picUrl,\n              //   lrc: songlrc,\n              id: id\n            });\n            that[list][index].timer = false;\n            setTimeout(function () {\n              that[list][index].timer = true;\n            }, 3000);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _playMusic.apply(this, arguments);\n}\n\nexport function listenMusic(id, fee, index, list, that, noCopyrightRcmd) {\n  console.log(that, \"----\");\n  var songUrlAdd = null;\n  var songlrc = \"\";\n\n  if (that[list][index].timer) {\n    if (noCopyrightRcmd) {\n      that.$message({\n        message: \"这首歌暂无版权\",\n        type: \"error\"\n      });\n      that[list][index].timer = false;\n      setTimeout(function () {\n        that[list][index].timer = true;\n      }, 3000);\n      return;\n    }\n\n    if (fee == 1) {\n      that.$message({\n        message: \"VIP歌曲 - 只能试听30s\",\n        type: \"warning\"\n      });\n    }\n\n    playMusicUrl({\n      id: id\n    }).then(function (res) {\n      // console.log(\"播放音乐链接\", res.data.data[0].url);\n      if (res.data.data[0].url) {\n        songUrlAdd = res.data.data[0].url;\n      }\n    }), // 获取歌词\n    getSongLyric({\n      id: id\n    }).then(function (res) {\n      songlrc = res.data.lrc.lyric;\n    }), // 获取歌曲信息\n    getSongDetails({\n      ids: id\n    }).then(function (res) {\n      if (songUrlAdd != null) {\n        that.$store.commit(\"aplayer/addAUDITION\", {\n          name: that[list][index].name,\n          //歌曲名\n          artist: that[list][index].ar[0].name,\n          //作者\n          url: songUrlAdd,\n          cover: that[list][index].al.picUrl,\n          lrc: songlrc,\n          id: id,\n          timer: true //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\n\n        });\n      }\n\n      that[list][index].timer = false;\n      setTimeout(function () {\n        that[list][index].timer = true;\n      }, 3000);\n    });\n  }\n}","map":{"version":3,"sources":["D:/Desktop/git/cloudMusic-Source-Code/src/utils/musicPlay.js"],"names":["playMusicUrl","getSongLyric","playMusic","id","fee","index","list","that","noCopyrightRcmd","console","log","songlrc","timer","$message","message","type","setTimeout","res","data","$store","commit","name","artist","ar","url","cover","al","picUrl","listenMusic","songUrlAdd","then","lrc","lyric","getSongDetails","ids"],"mappings":";;;AAAA,SAASA,YAAT,EAAuBC,YAAvB,QAA2C,WAA3C,C,CAEA;;AACA,gBAAsBC,SAAtB;AAAA;AAAA,C,CA8CA;;;uEA9CO,iBAAyBC,EAAzB,EAA6BC,GAA7B,EAAkCC,KAAlC,EAAyCC,IAAzC,EAA+CC,IAA/C,EAAqDC,eAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AACL;AACAC,YAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,CAAZ,EAA+B,MAA/B;AACIM,YAAAA,OAHC,GAGS,EAHT,EAGa;;AAHb,iBAIDJ,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAJjB;AAAA;AAAA;AAAA;;AAAA,iBAKCJ,eALD;AAAA;AAAA;AAAA;;AAMDD,YAAAA,IAAI,CAACM,QAAL,CAAc;AACZC,cAAAA,OAAO,EAAE,SADG;AAEZC,cAAAA,IAAI,EAAE;AAFM,aAAd;AAIAR,YAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,KAA1B;AACAI,YAAAA,UAAU,CAAC,YAAM;AACfT,cAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,IAA1B;AACD,aAFS,EAEP,IAFO,CAAV;AAXC;;AAAA;AAgBH,gBAAIR,GAAG,IAAI,CAAX,EAAc;AACZG,cAAAA,IAAI,CAACM,QAAL,CAAc;AACZC,gBAAAA,OAAO,EAAE,iBADG;AAEZC,gBAAAA,IAAI,EAAE;AAFM,eAAd;AAID,aArBE,CAsBH;AACA;AACA;AACA;AACA;AACA;;;AACFN,YAAAA,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACC,IAAhB,EAAqB,UAArB;AACMX,YAAAA,IAAI,CAACY,MAAL,CAAYC,MAAZ,CAAmB,iBAAnB,EAAsC;AACpCC,cAAAA,IAAI,EAAEd,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBgB,IADY;AACN;AAC9BC,cAAAA,MAAM,EAAEf,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBkB,EAAlB,CAAqB,CAArB,EAAwBF,IAFI;AAEE;AACtC;AACAG,cAAAA,GAAG,0DAAmDrB,EAAnD,SAJiC;AAKpCsB,cAAAA,KAAK,EAAElB,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBqB,EAAlB,CAAqBC,MALQ;AAMtC;AACExB,cAAAA,EAAE,EAAEA;AAPgC,aAAtC;AASAI,YAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,KAA1B;AACAI,YAAAA,UAAU,CAAC,YAAM;AACfT,cAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,IAA1B;AACD,aAFS,EAEP,IAFO,CAAV;;AAvCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AA+CP,OAAO,SAASgB,WAAT,CAAqBzB,EAArB,EAAyBC,GAAzB,EAA8BC,KAA9B,EAAqCC,IAArC,EAA2CC,IAA3C,EAAiDC,eAAjD,EAAkE;AACxEC,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ,EAAkB,MAAlB;AACC,MAAIsB,UAAU,GAAG,IAAjB;AACA,MAAIlB,OAAO,GAAG,EAAd;;AACA,MAAIJ,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAtB,EAA6B;AAC3B,QAAIJ,eAAJ,EAAqB;AACnBD,MAAAA,IAAI,CAACM,QAAL,CAAc;AACZC,QAAAA,OAAO,EAAE,SADG;AAEZC,QAAAA,IAAI,EAAE;AAFM,OAAd;AAIAR,MAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,KAA1B;AACAI,MAAAA,UAAU,CAAC,YAAM;AACfT,QAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,IAA1B;AACD,OAFS,EAEP,IAFO,CAAV;AAGA;AACD;;AACD,QAAIR,GAAG,IAAI,CAAX,EAAc;AACZG,MAAAA,IAAI,CAACM,QAAL,CAAc;AACZC,QAAAA,OAAO,EAAE,iBADG;AAEZC,QAAAA,IAAI,EAAE;AAFM,OAAd;AAID;;AACDf,IAAAA,YAAY,CAAC;AACXG,MAAAA,EAAE,EAAEA;AADO,KAAD,CAAZ,CAEG2B,IAFH,CAEQ,UAACb,GAAD,EAAS;AACf;AACA,UAAIA,GAAG,CAACC,IAAJ,CAASA,IAAT,CAAc,CAAd,EAAiBM,GAArB,EAA0B;AACxBK,QAAAA,UAAU,GAAGZ,GAAG,CAACC,IAAJ,CAASA,IAAT,CAAc,CAAd,EAAiBM,GAA9B;AACD;AACF,KAPD,GAQE;AACAvB,IAAAA,YAAY,CAAC;AACXE,MAAAA,EAAE,EAAEA;AADO,KAAD,CAAZ,CAEG2B,IAFH,CAEQ,UAACb,GAAD,EAAS;AACfN,MAAAA,OAAO,GAAGM,GAAG,CAACC,IAAJ,CAASa,GAAT,CAAaC,KAAvB;AACD,KAJD,CATF,EAcE;AACAC,IAAAA,cAAc,CAAC;AACbC,MAAAA,GAAG,EAAE/B;AADQ,KAAD,CAAd,CAEG2B,IAFH,CAEQ,UAACb,GAAD,EAAS;AACf,UAAIY,UAAU,IAAI,IAAlB,EAAwB;AACtBtB,QAAAA,IAAI,CAACY,MAAL,CAAYC,MAAZ,CAAmB,qBAAnB,EAA0C;AACxCC,UAAAA,IAAI,EAAEd,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBgB,IADgB;AACV;AAC9BC,UAAAA,MAAM,EAAEf,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBkB,EAAlB,CAAqB,CAArB,EAAwBF,IAFQ;AAEF;AACtCG,UAAAA,GAAG,EAAEK,UAHmC;AAIxCJ,UAAAA,KAAK,EAAElB,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBqB,EAAlB,CAAqBC,MAJY;AAKxCI,UAAAA,GAAG,EAAEpB,OALmC;AAMxCR,UAAAA,EAAE,EAAEA,EANoC;AAOxCS,UAAAA,KAAK,EAAE,IAPiC,CAO3B;;AAP2B,SAA1C;AASD;;AACDL,MAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,KAA1B;AACAI,MAAAA,UAAU,CAAC,YAAM;AACfT,QAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,IAA1B;AACD,OAFS,EAEP,IAFO,CAAV;AAGD,KAlBD,CAfF;AAkCD;AACF","sourcesContent":["import { playMusicUrl, getSongLyric } from \"@/api/api\";\r\n\r\n//添加歌曲到播放列表\r\nexport async function playMusic(id, fee, index, list, that, noCopyrightRcmd) {\r\n  //获取播放音乐链接\r\n  console.log(that[list][index], \"----\");\r\n  let songlrc = \"\"; //歌词\r\n  if (that[list][index].timer) {\r\n    if (noCopyrightRcmd) {\r\n      that.$message({\r\n        message: \"这首歌暂无版权\",\r\n        type: \"error\",\r\n      });\r\n      that[list][index].timer = false;\r\n      setTimeout(() => {\r\n        that[list][index].timer = true;\r\n      }, 3000);\r\n      return;\r\n    }\r\n    if (fee == 1) {\r\n      that.$message({\r\n        message: \"VIP歌曲 - 只能试听30s\",\r\n        type: \"warning\",\r\n      });\r\n    }\r\n    // 获取歌词\r\n    // getSongLyric({\r\n    //   id: id,\r\n    // }).then((res) => {\r\n    //   songlrc = res.data.lrc.lyric;\r\n    // }),\r\n\t\tconsole.log(res.data,'歌曲信息----')\r\n        that.$store.commit(\"aplayer/addSONG\", {\r\n          name: that[list][index].name, //歌曲名\r\n          artist: that[list][index].ar[0].name, //作者\r\n          // url: songUrlAdd,\r\n          url: `https://music.163.com/song/media/outer/url?id=${id}.mp3`,\r\n          cover: that[list][index].al.picUrl,\r\n        //   lrc: songlrc,\r\n          id: id,\r\n        });\r\n        that[list][index].timer = false;\r\n        setTimeout(() => {\r\n          that[list][index].timer = true;\r\n        }, 3000);\r\n      \r\n  }\r\n}\r\n\r\n//播放试听音乐\r\nexport function listenMusic(id, fee, index, list, that, noCopyrightRcmd) {\r\n\tconsole.log(that, \"----\");\r\n  let songUrlAdd = null;\r\n  let songlrc = \"\";\r\n  if (that[list][index].timer) {\r\n    if (noCopyrightRcmd) {\r\n      that.$message({\r\n        message: \"这首歌暂无版权\",\r\n        type: \"error\",\r\n      });\r\n      that[list][index].timer = false;\r\n      setTimeout(() => {\r\n        that[list][index].timer = true;\r\n      }, 3000);\r\n      return;\r\n    }\r\n    if (fee == 1) {\r\n      that.$message({\r\n        message: \"VIP歌曲 - 只能试听30s\",\r\n        type: \"warning\",\r\n      });\r\n    }\r\n    playMusicUrl({\r\n      id: id,\r\n    }).then((res) => {\r\n      // console.log(\"播放音乐链接\", res.data.data[0].url);\r\n      if (res.data.data[0].url) {\r\n        songUrlAdd = res.data.data[0].url;\r\n      }\r\n    }),\r\n      // 获取歌词\r\n      getSongLyric({\r\n        id: id,\r\n      }).then((res) => {\r\n        songlrc = res.data.lrc.lyric;\r\n      }),\r\n      // 获取歌曲信息\r\n      getSongDetails({\r\n        ids: id,\r\n      }).then((res) => {\r\n        if (songUrlAdd != null) {\r\n          that.$store.commit(\"aplayer/addAUDITION\", {\r\n            name: that[list][index].name, //歌曲名\r\n            artist: that[list][index].ar[0].name, //作者\r\n            url: songUrlAdd,\r\n            cover: that[list][index].al.picUrl,\r\n            lrc: songlrc,\r\n            id: id,\r\n            timer: true, //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\r\n          });\r\n        }\r\n        that[list][index].timer = false;\r\n        setTimeout(() => {\r\n          that[list][index].timer = true;\r\n        }, 3000);\r\n      });\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}