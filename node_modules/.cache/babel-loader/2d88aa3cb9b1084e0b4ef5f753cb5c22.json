{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { randomRange } from '@/utils/commonApi';\nexport default {\n  data() {\n    return {\n      bgmusicSrc: [{\n        name: '夏天的日子',\n        src: require('../static/bgmusic/夏天的日子.mp3'),\n        fontColor: 'fontColorgray'\n      }, {\n        name: '带走我的心啊 把他藏在行囊',\n        src: require('../static/bgmusic/带走我的心啊 把它藏在行囊.mp3'),\n        fontColor: 'fontColorgray'\n      }],\n      bgmusic: []\n    };\n  },\n\n  mounted() {\n    this.bgmusic = document.querySelectorAll('.bgmusicAudio'); // this.$nextTick(() => {\n    //   this.autoplayBgmusic()\n    // })\n  },\n\n  methods: {\n    //背景音乐播放/暂停\n    playbgMusic(idx) {\n      this.bgmusic.forEach((item, index) => {\n        if (item.paused && index === idx) {\n          item.play();\n        } else {\n          item.pause();\n        }\n      }); // this.bgmusic[index].play()\n    },\n\n    //背景音乐播放时触发\n    bgmusicPlayed() {\n      this.bgmusic.forEach((item, index) => {\n        if (item.paused) {\n          this.bgmusicSrc[index].fontColor = 'fontColorgray';\n        } else {\n          this.bgmusicSrc[index].fontColor = 'fontColorgreen';\n        }\n      });\n    },\n\n    //背景音乐重头播放\n    reloadbgMusic(idx) {\n      this.bgmusic.forEach((item, index) => {\n        if (item.paused && index === idx) {\n          item.load(); //重新加载音频\n\n          item.play(); //播放\n        } else {\n          item.load(); //重新加载\n        }\n      });\n    } //网页加载时，自动播放背景音乐\n    // autoplayBgmusic() {\n    //   this.reloadbgMusic(randomRange(0, this.bgmusic.length))\n    // },\n\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACAA;AACA;AACAC,mBACA;AACAC,qBADA;AAEAC,mDAFA;AAGAC;AAHA,OADA,EAMA;AACAF,6BADA;AAEAC,2DAFA;AAGAC;AAHA,OANA,CADA;AAaAC;AAbA;AAeA,GAjBA;;AAkBAC;AACA,8DADA,CAEA;AACA;AACA;AACA,GAvBA;;AAwBAC;AACA;AACAC;AACA;AACA;AACAC;AACA,SAFA,MAEA;AACAA;AACA;AACA,OANA,EADA,CAQA;AACA,KAXA;;AAYA;AACAC;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OANA;AAOA,KArBA;;AAsBA;AACAC;AACA;AACA;AACAF,sBADA,CACA;;AACAA,sBAFA,CAEA;AACA,SAHA,MAGA;AACAA,sBADA,CACA;AACA;AACA,OAPA;AAQA,KAhCA,CAiCA;AACA;AACA;AACA;;;AApCA;AAxBA","names":["data","bgmusicSrc","name","src","fontColor","bgmusic","mounted","methods","playbgMusic","item","bgmusicPlayed","reloadbgMusic"],"sourceRoot":"src/components","sources":["bgmusic.vue"],"sourcesContent":["<template>\r\n\r\n  <div class=\"bgmusicWrap\">\r\n    <ul class=\"bgmusic-ul\">\r\n      <div>放松一下</div>\r\n      <li v-for=\"(item,index) in bgmusicSrc\"\r\n          :key=\"item.src\"\r\n          :class=\"['bgmusic-li',item.fontColor]\"\r\n          @dblclick=\"reloadbgMusic(index)\"\r\n          @click=\"playbgMusic(index)\">\r\n        <audio class=\"bgmusicAudio\"\r\n               :src=\"item.src\"\r\n               @play=\"bgmusicPlayed\"\r\n               type=\"video/mp3\"></audio>\r\n        <span>{{item.name}}</span>\r\n      </li>\r\n\r\n    </ul>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { randomRange } from '@/utils/commonApi'\r\nexport default {\r\n  data() {\r\n    return {\r\n      bgmusicSrc: [\r\n        {\r\n          name: '夏天的日子',\r\n          src: require('../static/bgmusic/夏天的日子.mp3'),\r\n          fontColor: 'fontColorgray',\r\n        },\r\n        {\r\n          name: '带走我的心啊 把他藏在行囊',\r\n          src: require('../static/bgmusic/带走我的心啊 把它藏在行囊.mp3'),\r\n          fontColor: 'fontColorgray',\r\n        },\r\n      ],\r\n      bgmusic: [],\r\n    }\r\n  },\r\n  mounted() {\r\n    this.bgmusic = document.querySelectorAll('.bgmusicAudio')\r\n    // this.$nextTick(() => {\r\n    //   this.autoplayBgmusic()\r\n    // })\r\n  },\r\n  methods: {\r\n    //背景音乐播放/暂停\r\n    playbgMusic(idx) {\r\n      this.bgmusic.forEach((item, index) => {\r\n        if (item.paused && index === idx) {\r\n          item.play()\r\n        } else {\r\n          item.pause()\r\n        }\r\n      })\r\n      // this.bgmusic[index].play()\r\n    },\r\n    //背景音乐播放时触发\r\n    bgmusicPlayed() {\r\n      this.bgmusic.forEach((item, index) => {\r\n        if (item.paused) {\r\n          this.bgmusicSrc[index].fontColor = 'fontColorgray'\r\n        } else {\r\n          this.bgmusicSrc[index].fontColor = 'fontColorgreen'\r\n        }\r\n      })\r\n    },\r\n    //背景音乐重头播放\r\n    reloadbgMusic(idx) {\r\n      this.bgmusic.forEach((item, index) => {\r\n        if (item.paused && index === idx) {\r\n          item.load() //重新加载音频\r\n          item.play() //播放\r\n        } else {\r\n          item.load() //重新加载\r\n        }\r\n      })\r\n    },\r\n    //网页加载时，自动播放背景音乐\r\n    // autoplayBgmusic() {\r\n    //   this.reloadbgMusic(randomRange(0, this.bgmusic.length))\r\n    // },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.bgmusicWrap {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 5px;\r\n  width: 250px;\r\n  color: #ccc;\r\n  max-height: 20px;\r\n  overflow: hidden;\r\n  transition: 0.3s;\r\n  &:hover {\r\n    max-height: 200px;\r\n  }\r\n  .bgmusic-ul {\r\n    width: 100%;\r\n    // height: 20px;\r\n    // max-height: 20px;\r\n    text-align: center;\r\n    // overflow: hidden;\r\n    // background: rgb(190, 190, 189);\r\n    transition: 0.2s;\r\n    // &:hover {\r\n    //   max-height: 100%;\r\n    // }\r\n\r\n    .bgmusic-li {\r\n      height: 20px;\r\n      padding: 0 10px;\r\n      border-radius: 10px;\r\n      background: rgba(160, 160, 160, 0.096);\r\n      transition: 0.2s;\r\n      &:hover {\r\n        cursor: pointer;\r\n        color: rgb(29, 236, 167);\r\n        transform: scale(1.01);\r\n      }\r\n    }\r\n  }\r\n}\r\n.fontColorgreen {\r\n  color: rgb(29, 236, 167);\r\n}\r\n.fontColorgray {\r\n  color: #ccc;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}