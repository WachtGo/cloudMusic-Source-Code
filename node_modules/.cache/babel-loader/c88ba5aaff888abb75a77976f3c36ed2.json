{"ast":null,"code":"import _asyncToGenerator from \"D:/Desktop/git\\u5DE5\\u4F5C\\u533A/cloudMusic-Source-Code/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { playMusicUrl, getSongLyric, getSongDetails } from \"@/api/api\"; //添加歌曲到播放列表\n\nexport function playMusic(_x, _x2, _x3, _x4, _x5) {\n  return _playMusic.apply(this, arguments);\n} //播放试听音乐\n\nfunction _playMusic() {\n  _playMusic = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(id, fee, index, list, that) {\n    var songUrlAdd, songlrc;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            //获取播放音乐链接\n            // console.log(that,'----')\n            songUrlAdd = null; //音乐地址\n\n            songlrc = ''; //歌词 \n\n            if (that[list][index].timer) {\n              if (fee == 1) {\n                that.$message({\n                  message: \"VIP歌曲 - 只能试听30s\",\n                  type: \"warning\"\n                });\n              }\n\n              playMusicUrl({\n                id: id\n              }).then(function (res) {\n                // console.log(\"播放音乐链接\", res.data.data[0].url);\n                if (res.data.data[0].url) {\n                  songUrlAdd = res.data.data[0].url;\n                } else {\n                  that.$message({\n                    message: \"这首歌暂无版权\",\n                    type: \"error\"\n                  });\n                  that[list][index].timer = false;\n                  setTimeout(function () {\n                    that[list][index].timer = true;\n                  }, 3000);\n                  return;\n                }\n              }), // 获取歌词\n              getSongLyric({\n                id: id\n              }).then(function (res) {\n                songlrc = res.data.lrc.lyric;\n              }), // 获取歌曲信息\n              getSongDetails({\n                ids: id\n              }).then(function (res) {\n                that.$store.commit(\"addSONG\", {\n                  name: res.data.songs[0].name,\n                  //歌曲名\n                  artist: res.data.songs[0].ar[0].name,\n                  //作者\n                  url: songUrlAdd,\n                  cover: res.data.songs[0].al.picUrl,\n                  lrc: that.songlrc,\n                  id: id\n                });\n                that[list][index].timer = false;\n                setTimeout(function () {\n                  that[list][index].timer = true;\n                }, 3000);\n              });\n            }\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _playMusic.apply(this, arguments);\n}\n\nexport function listenMusic(id, fee, index, list, that) {\n  var songUrlAdd = null;\n  var songlrc = '';\n\n  if (fee == 1) {\n    that.$message({\n      message: \"VIP歌曲 - 只能试听30s\",\n      type: \"warning\"\n    });\n  }\n\n  playMusicUrl({\n    id: id\n  }).then(function (res) {\n    // console.log(\"播放音乐链接\", res.data.data[0].url);\n    if (res.data.data[0].url) {\n      songUrlAdd = res.data.data[0].url;\n    } else {\n      that.$message({\n        message: \"这首歌暂无版权\",\n        type: \"error\"\n      });\n      that[list][index].timer = false;\n      setTimeout(function () {\n        that[list][index].timer = true;\n      }, 3000);\n      return;\n    }\n  }), // 获取歌词\n  getSongLyric({\n    id: id\n  }).then(function (res) {\n    songlrc = res.data.lrc.lyric;\n  }), // 获取歌曲信息\n  getSongDetails({\n    ids: id\n  }).then(function (res) {\n    if (songUrlAdd != null) {\n      that.$store.commit('addAUDITION', {\n        name: res.data.songs[0].name,\n        //歌曲名\n        artist: res.data.songs[0].ar[0].name,\n        //作者\n        url: songUrlAdd,\n        cover: res.data.songs[0].al.picUrl,\n        lrc: songlrc,\n        id: id,\n        timer: true //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\n\n      });\n    }\n  });\n}","map":{"version":3,"sources":["D:/Desktop/git工作区/cloudMusic-Source-Code/src/utils/musicPlay.js"],"names":["playMusicUrl","getSongLyric","getSongDetails","playMusic","id","fee","index","list","that","songUrlAdd","songlrc","timer","$message","message","type","then","res","data","url","setTimeout","lrc","lyric","ids","$store","commit","name","songs","artist","ar","cover","al","picUrl","listenMusic"],"mappings":"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","sourcesContent":["import {\r\n  playMusicUrl,\r\n  getSongLyric,\r\n  getSongDetails,\r\n} from \"@/api/api\";\r\n\r\n //添加歌曲到播放列表\r\n export async function  playMusic (id, fee, index , list , that){\r\n\t//获取播放音乐链接\r\n\t// console.log(that,'----')\r\n\r\n\tlet songUrlAdd = null\t//音乐地址\r\n\tlet songlrc = '' //歌词 \r\n\tif (that[list][index].timer) {\r\n\t\tif (fee == 1) {\r\n\t\t\tthat.$message({\r\n\t\t\t\tmessage: \"VIP歌曲 - 只能试听30s\",\r\n\t\t\t\ttype: \"warning\",\r\n\t\t\t});\r\n\t\t}\r\n\t\tplayMusicUrl({\r\n\t\t\tid: id,\r\n\t\t}).then((res) => {\r\n\t\t\t// console.log(\"播放音乐链接\", res.data.data[0].url);\r\n\t\t\tif (res.data.data[0].url) {\r\n\t\t\t\tsongUrlAdd = res.data.data[0].url;\r\n\t\t\t} else {\r\n\t\t\t\tthat.$message({\r\n\t\t\t\t\tmessage: \"这首歌暂无版权\",\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t});\r\n\t\t\t\tthat[list][index].timer = false;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthat[list][index].timer = true;\r\n\t\t\t\t}, 3000);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}),\r\n\t\t\t// 获取歌词\r\n\t\t\tgetSongLyric({\r\n\t\t\t\tid: id,\r\n\t\t\t}).then((res) => {\r\n\t\t\t\tsonglrc = res.data.lrc.lyric;\r\n\t\t\t}),\r\n\t\t\t// 获取歌曲信息\r\n\t\t\tgetSongDetails({\r\n\t\t\t\tids: id,\r\n\t\t\t}).then((res) => {\r\n\t\t\t\t\tthat.$store.commit(\"addSONG\", {\r\n\t\t\t\t\t\tname: res.data.songs[0].name, //歌曲名\r\n\t\t\t\t\t\tartist: res.data.songs[0].ar[0].name, //作者\r\n\t\t\t\t\t\turl: songUrlAdd,\r\n\t\t\t\t\t\tcover: res.data.songs[0].al.picUrl,\r\n\t\t\t\t\t\tlrc: that.songlrc,\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthat[list][index].timer = false;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthat[list][index].timer = true;\r\n\t\t\t\t\t}, 3000);\r\n\t\t\t});\r\n\t}\r\n}\r\n//播放试听音乐\r\nexport function  listenMusic (id, fee, index, list, that) {\r\n\tlet songUrlAdd = null\r\n\tlet songlrc = ''\r\n\t if (fee == 1) {\r\n\t\t\tthat.$message({\r\n\t\t\t\tmessage: \"VIP歌曲 - 只能试听30s\",\r\n\t\t\t\ttype: \"warning\",\r\n\t\t\t});\r\n\t\t}\r\n\t\tplayMusicUrl({\r\n\t\t\tid: id,\r\n\t\t}).then((res) => {\r\n\t\t\t// console.log(\"播放音乐链接\", res.data.data[0].url);\r\n\t\t\tif (res.data.data[0].url) {\r\n\t\t\t\tsongUrlAdd = res.data.data[0].url;\r\n\t\t\t} else {\r\n\t\t\t\tthat.$message({\r\n\t\t\t\t\tmessage: \"这首歌暂无版权\",\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t});\r\n\t\t\t\tthat[list][index].timer = false;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthat[list][index].timer = true;\r\n\t\t\t\t}, 3000);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}),\r\n\t\t\t// 获取歌词\r\n\t\t\tgetSongLyric({\r\n\t\t\t\tid: id,\r\n\t\t\t}).then((res) => {\r\n\t\t\t \tsonglrc = res.data.lrc.lyric;\r\n\t\t\t}),\r\n\t\t\t// 获取歌曲信息\r\n\t\t\tgetSongDetails({\r\n\t\t\t\tids: id,\r\n\t\t\t}).then((res) => {\r\n\t\t\t\tif (songUrlAdd != null) {\r\n\t\t\t\t\tthat.$store.commit('addAUDITION',{\r\n\t\t\t\t\t\tname: res.data.songs[0].name, //歌曲名\r\n\t\t\t\t\t\tartist: res.data.songs[0].ar[0].name, //作者\r\n\t\t\t\t\t\turl: songUrlAdd,\r\n\t\t\t\t\t\tcover: res.data.songs[0].al.picUrl,\r\n\t\t\t\t\t\tlrc: songlrc,\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\ttimer:true//试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\r\n\t\t\t\t\t});}\r\n\t\t\t});\r\n\r\n}"]},"metadata":{},"sourceType":"module"}