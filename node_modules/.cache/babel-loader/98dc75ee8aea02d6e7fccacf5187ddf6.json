{"ast":null,"code":"import { playMusicUrl, getSongLyric } from \"@/api/api\"; //添加歌曲到播放列表\n\nexport async function playMusic(id, fee, index, list, that, noCopyrightRcmd) {\n  //获取播放音乐链接\n  console.log(that[list][index], \"歌曲信息----\");\n  let songlrc = \"\"; //歌词\n\n  if (that[list][index].timer) {\n    if (noCopyrightRcmd) {\n      that.$message({\n        message: \"这首歌暂无版权\",\n        type: \"error\"\n      });\n      that[list][index].timer = false;\n      setTimeout(() => {\n        that[list][index].timer = true;\n      }, 3000);\n      return;\n    }\n\n    if (fee == 1) {\n      that.$message({\n        message: \"VIP歌曲 - 只能试听30s\",\n        type: \"warning\"\n      });\n    } // 获取歌词\n    // getSongLyric({\n    //   id: id,\n    // }).then((res) => {\n    //   songlrc = res.data.lrc.lyric;\n    // }),\n\n\n    that.$store.commit(\"aplayer/addSONG\", {\n      name: that[list][index].name,\n      //歌曲名\n      artist: that[list][index].ar[0].name,\n      //作者\n      // url: songUrlAdd,\n      url: `https://music.163.com/song/media/outer/url?id=${id}.mp3`,\n      cover: that[list][index].al.picUrl,\n      //   lrc: songlrc,\n      id: id\n    });\n    that[list][index].timer = false;\n    setTimeout(() => {\n      that[list][index].timer = true;\n    }, 3000);\n  }\n} //播放试听音乐\n\nexport async function listenMusic(id, fee, index, list, that, noCopyrightRcmd) {\n  console.log(that[list][index], \"歌曲信息----\");\n  let songUrlAdd = null;\n  let songlrc = \"\";\n\n  if (that[list][index].timer) {\n    if (noCopyrightRcmd) {\n      that.$message({\n        message: \"这首歌暂无版权\",\n        type: \"error\"\n      });\n      that[list][index].timer = false;\n      setTimeout(() => {\n        that[list][index].timer = true;\n      }, 3000);\n      return;\n    }\n\n    if (fee == 1) {\n      that.$message({\n        message: \"VIP歌曲 - 只能试听30s\",\n        type: \"warning\"\n      });\n      await playMusicUrl({\n        id: id\n      }).then(res => {\n        // console.log(\"播放音乐链接\", res.data.data[0].url);\n        if (res.data.data[0].url) {\n          songUrlAdd = res.data.data[0].url;\n\n          if (songUrlAdd != null) {\n            that.$store.commit(\"aplayer/addAUDITION\", {\n              name: that[list][index].name,\n              //歌曲名\n              artist: that[list][index].ar[0].name,\n              //作者\n              url: songUrlAdd,\n              cover: that[list][index].al.picUrl,\n              // lrc: songlrc,\n              id: id,\n              timer: true //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\n\n            });\n          }\n        }\n      }); // 获取歌词\n      //   getSongLyric({\n      //     id: id,\n      //   }).then((res) => {\n      //     songlrc = res.data.lrc.lyric;\n      //   });\n    } else if (fee == 0 || fee == 8) {\n      that.$store.commit(\"aplayer/addAUDITION\", {\n        name: that[list][index].name,\n        //歌曲名\n        artist: that[list][index].ar[0].name,\n        //作者\n        // url: songUrlAdd,\n        url: `https://music.163.com/song/media/outer/url?id=${id}.mp3`,\n        cover: that[list][index].al.picUrl,\n        // lrc: songlrc,\n        id: id,\n        timer: true //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\n\n      });\n    }\n\n    that[list][index].timer = false;\n    setTimeout(() => {\n      that[list][index].timer = true;\n    }, 3000);\n  }\n}","map":{"version":3,"sources":["D:/Desktop/git/cloudMusic-Source-Code/src/utils/musicPlay.js"],"names":["playMusicUrl","getSongLyric","playMusic","id","fee","index","list","that","noCopyrightRcmd","console","log","songlrc","timer","$message","message","type","setTimeout","$store","commit","name","artist","ar","url","cover","al","picUrl","listenMusic","songUrlAdd","then","res","data"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,YAAvB,QAA2C,WAA3C,C,CAEA;;AACA,OAAO,eAAeC,SAAf,CAAyBC,EAAzB,EAA6BC,GAA7B,EAAkCC,KAAlC,EAAyCC,IAAzC,EAA+CC,IAA/C,EAAqDC,eAArD,EAAsE;AAC3E;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,CAAZ,EAA+B,UAA/B;AACA,MAAIM,OAAO,GAAG,EAAd,CAH2E,CAGzD;;AAClB,MAAIJ,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAtB,EAA6B;AAC3B,QAAIJ,eAAJ,EAAqB;AACnBD,MAAAA,IAAI,CAACM,QAAL,CAAc;AACZC,QAAAA,OAAO,EAAE,SADG;AAEZC,QAAAA,IAAI,EAAE;AAFM,OAAd;AAIAR,MAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,KAA1B;AACAI,MAAAA,UAAU,CAAC,MAAM;AACfT,QAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,IAA1B;AACD,OAFS,EAEP,IAFO,CAAV;AAGA;AACD;;AACD,QAAIR,GAAG,IAAI,CAAX,EAAc;AACZG,MAAAA,IAAI,CAACM,QAAL,CAAc;AACZC,QAAAA,OAAO,EAAE,iBADG;AAEZC,QAAAA,IAAI,EAAE;AAFM,OAAd;AAID,KAjB0B,CAkB3B;AACA;AACA;AACA;AACA;AACA;;;AACAR,IAAAA,IAAI,CAACU,MAAL,CAAYC,MAAZ,CAAmB,iBAAnB,EAAsC;AACpCC,MAAAA,IAAI,EAAEZ,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBc,IADY;AACN;AAC9BC,MAAAA,MAAM,EAAEb,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBgB,EAAlB,CAAqB,CAArB,EAAwBF,IAFI;AAEE;AACtC;AACAG,MAAAA,GAAG,EAAG,iDAAgDnB,EAAG,MAJrB;AAKpCoB,MAAAA,KAAK,EAAEhB,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBmB,EAAlB,CAAqBC,MALQ;AAMpC;AACAtB,MAAAA,EAAE,EAAEA;AAPgC,KAAtC;AASAI,IAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,KAA1B;AACAI,IAAAA,UAAU,CAAC,MAAM;AACfT,MAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,IAA1B;AACD,KAFS,EAEP,IAFO,CAAV;AAGD;AACF,C,CAED;;AACA,OAAO,eAAec,WAAf,CAA2BvB,EAA3B,EAA+BC,GAA/B,EAAoCC,KAApC,EAA2CC,IAA3C,EAAiDC,IAAjD,EAAuDC,eAAvD,EAAwE;AAC7EC,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,CAAZ,EAA+B,UAA/B;AACA,MAAIsB,UAAU,GAAG,IAAjB;AACA,MAAIhB,OAAO,GAAG,EAAd;;AACA,MAAIJ,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAtB,EAA6B;AAC3B,QAAIJ,eAAJ,EAAqB;AACnBD,MAAAA,IAAI,CAACM,QAAL,CAAc;AACZC,QAAAA,OAAO,EAAE,SADG;AAEZC,QAAAA,IAAI,EAAE;AAFM,OAAd;AAIAR,MAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,KAA1B;AACAI,MAAAA,UAAU,CAAC,MAAM;AACfT,QAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,IAA1B;AACD,OAFS,EAEP,IAFO,CAAV;AAGA;AACD;;AACD,QAAIR,GAAG,IAAI,CAAX,EAAc;AACZG,MAAAA,IAAI,CAACM,QAAL,CAAc;AACZC,QAAAA,OAAO,EAAE,iBADG;AAEZC,QAAAA,IAAI,EAAE;AAFM,OAAd;AAIA,YAAMf,YAAY,CAAC;AACjBG,QAAAA,EAAE,EAAEA;AADa,OAAD,CAAZ,CAEHyB,IAFG,CAEGC,GAAD,IAAS;AACf;AACA,YAAIA,GAAG,CAACC,IAAJ,CAASA,IAAT,CAAc,CAAd,EAAiBR,GAArB,EAA0B;AACxBK,UAAAA,UAAU,GAAGE,GAAG,CAACC,IAAJ,CAASA,IAAT,CAAc,CAAd,EAAiBR,GAA9B;;AACA,cAAIK,UAAU,IAAI,IAAlB,EAAwB;AACtBpB,YAAAA,IAAI,CAACU,MAAL,CAAYC,MAAZ,CAAmB,qBAAnB,EAA0C;AACxCC,cAAAA,IAAI,EAAEZ,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBc,IADgB;AACV;AAC9BC,cAAAA,MAAM,EAAEb,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBgB,EAAlB,CAAqB,CAArB,EAAwBF,IAFQ;AAEF;AACtCG,cAAAA,GAAG,EAAEK,UAHmC;AAIxCJ,cAAAA,KAAK,EAAEhB,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBmB,EAAlB,CAAqBC,MAJY;AAKxC;AACAtB,cAAAA,EAAE,EAAEA,EANoC;AAOxCS,cAAAA,KAAK,EAAE,IAPiC,CAO3B;;AAP2B,aAA1C;AASD;AACF;AACF,OAlBK,CAAN,CALY,CAwBZ;AACA;AACA;AACA;AACA;AACA;AACD,KA9BD,MA8BO,IAAIR,GAAG,IAAI,CAAP,IAAYA,GAAG,IAAI,CAAvB,EAA0B;AAC/BG,MAAAA,IAAI,CAACU,MAAL,CAAYC,MAAZ,CAAmB,qBAAnB,EAA0C;AACxCC,QAAAA,IAAI,EAAEZ,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBc,IADgB;AACV;AAC9BC,QAAAA,MAAM,EAAEb,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBgB,EAAlB,CAAqB,CAArB,EAAwBF,IAFQ;AAEF;AACtC;AACAG,QAAAA,GAAG,EAAG,iDAAgDnB,EAAG,MAJjB;AAKxCoB,QAAAA,KAAK,EAAEhB,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBmB,EAAlB,CAAqBC,MALY;AAMxC;AACAtB,QAAAA,EAAE,EAAEA,EAPoC;AAQxCS,QAAAA,KAAK,EAAE,IARiC,CAQ3B;;AAR2B,OAA1C;AAUD;;AACDL,IAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,KAA1B;AACAI,IAAAA,UAAU,CAAC,MAAM;AACfT,MAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBO,KAAlB,GAA0B,IAA1B;AACD,KAFS,EAEP,IAFO,CAAV;AAGD;AACF","sourcesContent":["import { playMusicUrl, getSongLyric } from \"@/api/api\";\r\n\r\n//添加歌曲到播放列表\r\nexport async function playMusic(id, fee, index, list, that, noCopyrightRcmd) {\r\n  //获取播放音乐链接\r\n  console.log(that[list][index], \"歌曲信息----\");\r\n  let songlrc = \"\"; //歌词\r\n  if (that[list][index].timer) {\r\n    if (noCopyrightRcmd) {\r\n      that.$message({\r\n        message: \"这首歌暂无版权\",\r\n        type: \"error\",\r\n      });\r\n      that[list][index].timer = false;\r\n      setTimeout(() => {\r\n        that[list][index].timer = true;\r\n      }, 3000);\r\n      return;\r\n    }\r\n    if (fee == 1) {\r\n      that.$message({\r\n        message: \"VIP歌曲 - 只能试听30s\",\r\n        type: \"warning\",\r\n      });\r\n    }\r\n    // 获取歌词\r\n    // getSongLyric({\r\n    //   id: id,\r\n    // }).then((res) => {\r\n    //   songlrc = res.data.lrc.lyric;\r\n    // }),\r\n    that.$store.commit(\"aplayer/addSONG\", {\r\n      name: that[list][index].name, //歌曲名\r\n      artist: that[list][index].ar[0].name, //作者\r\n      // url: songUrlAdd,\r\n      url: `https://music.163.com/song/media/outer/url?id=${id}.mp3`,\r\n      cover: that[list][index].al.picUrl,\r\n      //   lrc: songlrc,\r\n      id: id,\r\n    });\r\n    that[list][index].timer = false;\r\n    setTimeout(() => {\r\n      that[list][index].timer = true;\r\n    }, 3000);\r\n  }\r\n}\r\n\r\n//播放试听音乐\r\nexport async function listenMusic(id, fee, index, list, that, noCopyrightRcmd) {\r\n  console.log(that[list][index], \"歌曲信息----\");\r\n  let songUrlAdd = null;\r\n  let songlrc = \"\";\r\n  if (that[list][index].timer) {\r\n    if (noCopyrightRcmd) {\r\n      that.$message({\r\n        message: \"这首歌暂无版权\",\r\n        type: \"error\",\r\n      });\r\n      that[list][index].timer = false;\r\n      setTimeout(() => {\r\n        that[list][index].timer = true;\r\n      }, 3000);\r\n      return;\r\n    }\r\n    if (fee == 1) {\r\n      that.$message({\r\n        message: \"VIP歌曲 - 只能试听30s\",\r\n        type: \"warning\",\r\n      });\r\n      await playMusicUrl({\r\n        id: id,\r\n      }).then((res) => {\r\n        // console.log(\"播放音乐链接\", res.data.data[0].url);\r\n        if (res.data.data[0].url) {\r\n          songUrlAdd = res.data.data[0].url;\r\n          if (songUrlAdd != null) {\r\n            that.$store.commit(\"aplayer/addAUDITION\", {\r\n              name: that[list][index].name, //歌曲名\r\n              artist: that[list][index].ar[0].name, //作者\r\n              url: songUrlAdd,\r\n              cover: that[list][index].al.picUrl,\r\n              // lrc: songlrc,\r\n              id: id,\r\n              timer: true, //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\r\n            });\r\n          }\r\n        }\r\n      });\r\n      // 获取歌词\r\n      //   getSongLyric({\r\n      //     id: id,\r\n      //   }).then((res) => {\r\n      //     songlrc = res.data.lrc.lyric;\r\n      //   });\r\n    } else if (fee == 0 || fee == 8) {\r\n      that.$store.commit(\"aplayer/addAUDITION\", {\r\n        name: that[list][index].name, //歌曲名\r\n        artist: that[list][index].ar[0].name, //作者\r\n        // url: songUrlAdd,\r\n        url: `https://music.163.com/song/media/outer/url?id=${id}.mp3`,\r\n        cover: that[list][index].al.picUrl,\r\n        // lrc: songlrc,\r\n        id: id,\r\n        timer: true, //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\r\n      });\r\n    }\r\n    that[list][index].timer = false;\r\n    setTimeout(() => {\r\n      that[list][index].timer = true;\r\n    }, 3000);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}