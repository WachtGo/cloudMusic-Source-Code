{"ast":null,"code":"require(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.regexp.to-string.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/web.url.js\");\n\nrequire(\"core-js/modules/web.url-search-params.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.string.trim.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-names.js\");\n\nrequire(\"core-js/modules/es.object.freeze.js\");\n\n//随机颜色\nvar randomColor = function randomColor() {\n  return \"#\".concat((Math.random() * 0xffffff << 0).toString(16));\n}; //转换成年月日\n\n\nvar transtime = function transtime(millisecond) {\n  if (!millisecond) {\n    return;\n  }\n\n  var year = new Date(millisecond).getFullYear();\n  var month = new Date(millisecond).getMonth() + 1;\n  var date = new Date(millisecond).getDate();\n  return year + '-' + month + '-' + date;\n}; //将歌曲列表歌曲时长转化成分秒\n\n\nvar transMusicTime = function transMusicTime(arr, dt) {\n  for (var i = 0; i < arr.length; i++) {\n    var min = parseInt(arr[i][dt] / 1000 / 60);\n    var sec = parseInt(arr[i][dt] / 1000 % 60);\n\n    if (min < 10) {\n      min = \"0\" + min;\n    }\n\n    if (sec < 10) {\n      sec = \"0\" + sec;\n    }\n\n    arr[i][dt] = min + \":\" + sec;\n  }\n}; //将播放量转换成亿万单位\n\n\nvar transPlayCount = function transPlayCount(arr, playCount) {\n  for (var i = 0; i < arr.length; i++) {\n    if (String(arr[i][playCount]).length > 5 && String(arr[i][playCount]).length < 9) {\n      arr[i][playCount] = String(arr[i][playCount]).substr(0, String(arr[i][playCount]).length - 4) + \"万\";\n    } else if (String(arr[i][playCount]).length == 5) {\n      arr[i][playCount] = String(arr[i][playCount]).substr(0, 1) + \".\" + String(arr[i][playCount]).substr(1, 2) + \"万\";\n    } else if (String(arr[i][playCount]).length == 9) {\n      arr[i][playCount] = String(arr[i][playCount]).substr(0, 1) + \".\" + String(arr[i][playCount]).substr(1, 2) + \"亿\";\n    } else if (String(arr[i][playCount]).length > 9) {\n      arr[i][playCount] = String(arr[i][playCount]).substr(0, String(arr[i][playCount]).length - 8) + \"亿\";\n    }\n  }\n}; //歌曲下载\n\n\nvar download = function download(src, filename) {\n  fetch(src).then(function (res) {\n    return res.blob();\n  }).then(function (blob) {\n    var a = document.createElement('a');\n    document.body.appendChild(a);\n    a.style.display = 'none';\n    var url = window.URL.createObjectURL(blob);\n    a.href = url; //下载地址\n\n    a.download = \"\".concat(filename, \".mp3\"); //下载文件名\n\n    a.click(); //模拟点击，自动下载\n\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n  });\n}; //获取当前时间戳\n\n\nvar getTimestamp = function getTimestamp() {\n  return new Date().getTime();\n}; //生成(min,max)之间的随机整数（包含min,不包含max）\n\n\nvar randomRange = function randomRange(min, max) {\n  return Math.floor(Math.random() * (max - min)) + min;\n}; // Cookie Parser    将cookie解析\n\n\nvar cookieParser = function cookieParser(cookie) {\n  var parserData = {};\n  (cookie || '').split(/;\\s+|(?<!\\s)\\s+$/g).forEach(function (pair) {\n    var crack = pair.indexOf('=');\n    if (crack < 1 || crack == pair.length - 1) return;\n    parserData[decodeURIComponent(pair.slice(0, crack)).trim()] = decodeURIComponent(pair.slice(crack + 1)).trim();\n  });\n  return [parserData['HTTPOnly;MUSIC_U'], parserData['HTTPOnly;__csrf']];\n  /* \n  // console.log(parserData)\n  {\n    Expires: \"Sat, 17 Mar 2091 18:24:35 GMT\"\n    HTTPOnly;MUSIC_A_T: \"1481119727062\"\n    HTTPOnly;MUSIC_R_T: \"1481119757789\"\n    HTTPOnly;MUSIC_U: \"6bf80db2682091e66db7c358940e6034f555d03d999284f42033476c98e45796993166e004087dd3e30340b48322c4fd7a82616b73ff591e0195ea446a99c0ab92386fc4f57b0915a0d2166338885bd7\"\n    HTTPOnly;__csrf: \"a7ae33e29d089a9e30774e67bfd99367\"\n    MUSIC_A_T: \"1481119727062\"\n    Max-Age: \"2147483647\"\n    Path: \"/api/clientlog\"\n  }\n   */\n  //6bf80db2682091e66db7c358940e6034f555d03d999284f42033476c98e45796993166e004087dd3e30340b48322c4fd7a82616b73ff591e0195ea446a99c0ab92386fc4f57b0915a0d2166338885bd7\n}; //深冻结\n\n\nvar deepFreeze = function deepFreeze(obj) {\n  // 获取所有属性\n  var propNames = Object.getOwnPropertyNames(obj); // 遍历\n\n  propNames.forEach(function (item) {\n    var prop = obj[item]; // 如果某个属性的属性值是对象，则递归调用\n\n    if (prop instanceof Object && prop !== null) {\n      deepFreeze(prop);\n    }\n  }); // 冻结自身\n\n  return Object.freeze(obj);\n};\n\nmodule.exports = {\n  randomColor: randomColor,\n  transtime: transtime,\n  transMusicTime: transMusicTime,\n  transPlayCount: transPlayCount,\n  download: download,\n  getTimestamp: getTimestamp,\n  randomRange: randomRange,\n  cookieParser: cookieParser,\n  deepFreeze: deepFreeze\n};","map":null,"metadata":{},"sourceType":"script"}