{"ast":null,"code":"import _objectSpread from \"C:/Users/Wacht/Desktop/git/cloudMusic-Source-Code/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapMutations, mapState } from \"vuex\";\nimport { getDownloadUrl as _getDownloadUrl } from \"@/api/api\";\nimport { playMusic as _playMusic, listenMusic as _listenMusic } from \"@/utils/musicPlay\";\nimport { likeMusic } from \"@/api/needLogin/musicOperate\";\nimport { download } from \"@/utils/commonApi\";\nexport default {\n  props: {\n    songlist: Array\n  },\n  data: function data() {\n    return {};\n  },\n  computed: _objectSpread({}, mapState(\"aplayer\", [\"currentPlayMusic\"])),\n  methods: {\n    //获取歌曲详情,进入详情页面\n    goSongDetails: function goSongDetails(songDetails) {\n      // console.log('歌曲信息',songDetails)\n      this.$router.push({\n        name: \"songDetails\",\n        params: {\n          songDetails: songDetails\n        }\n      });\n    },\n\n    /*  //加入/删除喜欢音乐\r\n     likeMusic(id, bool) {\r\n       const loading = this.$loading({\r\n         target: \"#app_body\",\r\n         background: \"rgba(255,255,255,0.1)\",\r\n       });\r\n       likeMusic({ id: id, like: bool })\r\n         .then((res) => {\r\n           this.$nextTick(() => {\r\n             loading.close();\r\n           });\r\n           console.log(\"添加\", res);\r\n           if (res.data.code === 200) {\r\n             if (bool) {\r\n               this.$message.success(\"已添加入我的喜欢-可进入网易云音乐查看\");\r\n               return;\r\n             }\r\n             this.$message.success(\"已从我的喜欢列表删除\");\r\n           }\r\n         })\r\n         .catch((error) => {\r\n           this.$nextTick(() => {\r\n             loading.close();\r\n           });\r\n         });\r\n     }, */\n    //试听音乐\n    listenMusic: function listenMusic(songDetals) {\n      //获取播放音乐链接\n      var that = this; // var list = \"songlist\";\n      // console.log(songDetals)\n\n      _listenMusic(songDetals, that);\n    },\n    //添加歌曲到播放列表\n    playMusic: function playMusic(songDetals) {\n      //获取播放音乐链接\n      var that = this; // var list = \"songlist\";\n\n      _playMusic(songDetals, that);\n    },\n    playMV: function playMV(mvId) {\n      //获取mv播放链接\n      this.$router.push({\n        name: \"mvPlay\",\n        params: {\n          mvId: mvId\n        }\n      });\n    },\n    //获取歌曲下载地址\n    getDownloadUrl: function getDownloadUrl(songId, songName, songArtist) {\n      var musicfilename = songName + ' - ' + songArtist;\n      var that = this;\n      that.$message({\n        type: \"success\",\n        message: \"正在尝试下载\"\n      });\n      var params = {\n        id: songId\n      };\n\n      _getDownloadUrl(params).then(function (res) {\n        // console.log('歌曲下载地址：', res.data)\n        // console.log(\"歌曲下载地址：\", res.data.data.url);\n        // download(res.data.data.url, songName)\n        download(res.data.data[0].url, musicfilename);\n        that.$message({\n          type: \"success\",\n          message: \"开始下载了\"\n        });\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACAA;AACAC;AADA,GADA;AAIAC,MAJA,kBAIA;AACA;AACA,GANA;AAOAC,8BACAC,yCADA,CAPA;AAUAC;AACA;AACAC,iBAFA,yBAEAC,WAFA,EAEA;AACA;AACA;AACAC,2BADA;AAEAC;AACAF;AADA;AAFA;AAMA,KAVA;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAG,eAtCA,uBAsCAC,UAtCA,EAsCA;AACA;AACA,sBAFA,CAGA;AACA;;AACAD;AACA,KA5CA;AA6CA;AACAE,aA9CA,qBA8CAD,UA9CA,EA8CA;AACA;AACA,sBAFA,CAGA;;AACAC;AACA,KAnDA;AAoDAC,UApDA,kBAoDAC,IApDA,EAoDA;AACA;AACA;AACAN,sBADA;AAEAC;AAAAK;AAAA;AAFA;AAIA,KA1DA;AA2DA;AACAC,kBA5DA,0BA4DAC,MA5DA,EA4DAC,QA5DA,EA4DAC,UA5DA,EA4DA;AACA;AACA;AACAC;AACAC,uBADA;AAEAC;AAFA;AAIA;AACAC;AADA;;AAGAP;AACA;AACA;AACA;AACAQ;AACAJ;AACAC,yBADA;AAEAC;AAFA;AAIA,OATA;AAUA;AAhFA;AAVA","names":["props","songlist","data","computed","mapState","methods","goSongDetails","songDetails","name","params","listenMusic","songDetals","playMusic","playMV","mvId","getDownloadUrl","songId","songName","songArtist","that","type","message","id","download"],"sourceRoot":"src/components","sources":["songlist.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"music-list\"  v-for=\"(item, index) in songlist\" :key=\"item.id\" \r\n        :style=\"{\r\n              color: item.id === currentPlayMusic.id ? 'rgb(0, 250, 180)' : '#fff',\r\n            }\"> \r\n      <div style=\"width: 35px\">{{ index + 1 }}.</div>\r\n      <div @dblclick=\"listenMusic(item)\" class=\"music-list-info\">\r\n        <div class=\"music-list-span\">{{ item.name }}</div>\r\n        <div class=\"music-list-span\">{{ item.ar[0].name }}</div>\r\n        <div class=\"music-list-span music-list-dt\">{{ item.dt }}</div>\r\n      </div>\r\n      <!-- 双击进入歌曲详情，但是由于不符合一般人习惯，暂时换成试听音乐 -->\r\n      <!--  <div @dblclick=\"goSongDetails(item)\" class=\"music-list-info\">\r\n        <div class=\"music-list-span\">{{ item.name }}</div>\r\n        <div class=\"music-list-span\">{{ item.ar[0].name }}</div>\r\n        <div class=\"music-list-span music-list-dt\">{{ item.dt }}</div>\r\n      </div> -->\r\n\r\n      <div class=\"option\">\r\n        <!-- 加入我的喜欢\r\n        <span @click=\"likeMusic(item.id, true)\"\r\n          ><i class=\"iFont el-icon-star-on iconhover\"></i\r\n        ></span>\r\n        从我的喜欢删除\r\n        <span @click=\"likeMusic(item.id, false)\"\r\n          ><i class=\"iFont el-icon-star-off iconhover\"></i\r\n        ></span> -->\r\n        <!-- <i class=\"iFont el-icon-star-off\" @click=\"collectPlaylist\"></i> -->\r\n        <!-- 试听 -->\r\n        <span @click=\"listenMusic(item)\"><i class=\"el-icon-headset iconhover\"></i></span>\r\n        <!-- 添加到播放列表 -->\r\n        <span v-if=\"item.fee == 0 || item.fee == 8\" @click.stop=\"playMusic(item)\"><i\r\n            class=\"el-icon-folder-add iconhover\"></i>\r\n        </span>\r\n        <!-- 播放MV -->\r\n        <span v-if=\"Boolean(item.mv)\" @click.stop=\"playMV(item.mv)\"><i class=\"el-icon-video-camera iconhover\"></i>\r\n        </span>\r\n        <!-- 下载 -->\r\n        <span v-if=\"item.fee == 0 || item.fee == 8\" @click=\"getDownloadUrl(item.id, item.name, item.ar[0].name)\">\r\n          <i class=\"el-icon-download iconhover\"></i></span>\r\n      </div>\r\n    \r\n      \r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations, mapState } from \"vuex\";\r\nimport { getDownloadUrl } from \"@/api/api\";\r\nimport { playMusic, listenMusic } from \"@/utils/musicPlay\";\r\nimport { likeMusic } from \"@/api/needLogin/musicOperate\";\r\nimport { download } from \"@/utils/commonApi\";\r\nexport default {\r\n  props: {\r\n    songlist: Array,\r\n  },\r\n  data() {\r\n    return {};\r\n  },\r\n  computed: {\r\n    ...mapState(\"aplayer\", [\"currentPlayMusic\"]),\r\n  },\r\n  methods: {\r\n    //获取歌曲详情,进入详情页面\r\n    goSongDetails(songDetails) {\r\n      // console.log('歌曲信息',songDetails)\r\n      this.$router.push({\r\n        name: \"songDetails\",\r\n        params: {\r\n          songDetails: songDetails,\r\n        },\r\n      });\r\n    },\r\n    /*  //加入/删除喜欢音乐\r\n     likeMusic(id, bool) {\r\n       const loading = this.$loading({\r\n         target: \"#app_body\",\r\n         background: \"rgba(255,255,255,0.1)\",\r\n       });\r\n       likeMusic({ id: id, like: bool })\r\n         .then((res) => {\r\n           this.$nextTick(() => {\r\n             loading.close();\r\n           });\r\n           console.log(\"添加\", res);\r\n           if (res.data.code === 200) {\r\n             if (bool) {\r\n               this.$message.success(\"已添加入我的喜欢-可进入网易云音乐查看\");\r\n               return;\r\n             }\r\n             this.$message.success(\"已从我的喜欢列表删除\");\r\n           }\r\n         })\r\n         .catch((error) => {\r\n           this.$nextTick(() => {\r\n             loading.close();\r\n           });\r\n         });\r\n     }, */\r\n    //试听音乐\r\n    listenMusic(songDetals) {\r\n      //获取播放音乐链接\r\n      var that = this;\r\n      // var list = \"songlist\";\r\n      // console.log(songDetals)\r\n      listenMusic(songDetals, that);\r\n    },\r\n    //添加歌曲到播放列表\r\n    playMusic(songDetals) {\r\n      //获取播放音乐链接\r\n      var that = this;\r\n      // var list = \"songlist\";\r\n      playMusic(songDetals, that);\r\n    },\r\n    playMV(mvId) {\r\n      //获取mv播放链接\r\n      this.$router.push({\r\n        name: \"mvPlay\",\r\n        params: { mvId: mvId },\r\n      });\r\n    },\r\n    //获取歌曲下载地址\r\n    getDownloadUrl(songId, songName, songArtist) {\r\n      let musicfilename = songName + ' - ' + songArtist\r\n      var that = this;\r\n      that.$message({\r\n        type: \"success\",\r\n        message: \"正在尝试下载\",\r\n      });\r\n      let params = {\r\n        id: songId,\r\n      };\r\n      getDownloadUrl(params).then((res) => {\r\n        // console.log('歌曲下载地址：', res.data)\r\n        // console.log(\"歌曲下载地址：\", res.data.data.url);\r\n        // download(res.data.data.url, songName)\r\n        download(res.data.data[0].url, musicfilename);\r\n        that.$message({\r\n          type: \"success\",\r\n          message: \"开始下载了\",\r\n        });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" >\r\n.music-list {\r\n  position: relative;\r\n  display: flex;\r\n  align-content: center;\r\n  justify-content: space-around;\r\n  margin: 5px auto 5px;\r\n  padding: 0 15px;\r\n  width: 96%;\r\n  height: 30px;\r\n  line-height: 30px;\r\n  overflow: hidden;\r\n  color: rgba(255, 255, 255, 1);\r\n  font-weight: bolder;\r\n  border-radius: 5px;\r\n  -o-text-overflow: ellipsis;\r\n  text-overflow: ellipsis;\r\n  background-color: rgba(99, 187, 162, 0.044);\r\n  border-radius: 15px;\r\n  transition: 0.2s;\r\n\r\n  .music-list-index {\r\n    position: absolute;\r\n    left: 0;\r\n    width: 5%;\r\n  }\r\n\r\n  .music-list-info {\r\n    display: flex;\r\n    align-content: center;\r\n    justify-content: space-between;\r\n    width: 70%;\r\n\r\n    .music-list-span,\r\n    .music-list-dt {\r\n      text-align: center;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n    }\r\n\r\n    .music-list-span {\r\n      width: 40%;\r\n    }\r\n\r\n    .music-list-dt {\r\n      width: 25%;\r\n      // font-size:13px;\r\n      text-align: center;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n    }\r\n  }\r\n\r\n  .option {\r\n    display: inline-block;\r\n    margin-left: 2%;\r\n    width: 15%;\r\n    box-sizing: border-box;\r\n\r\n    span {\r\n      display: inline-block;\r\n      width: 15%;\r\n\r\n      &:hover {\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n\r\n  &:hover {\r\n    color: rgb(88, 255, 241);\r\n    transform: scale(1.01);\r\n    // background: rgba(141, 251, 255, 0.192);\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}