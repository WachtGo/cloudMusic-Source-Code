{"ast":null,"code":"import { playMusicUrl, getSongLyric } from \"@/api/api\"; //添加歌曲到播放列表\n\nexport async function playMusic(songDetals, that) {\n  //获取播放音乐链接\n  console.log(songDetals, \"歌曲信息----\");\n  let songlrc = \"\"; //歌词\n\n  if (songDetals.timer) {\n    if (songDetals.noCopyrightRcmd) {\n      that.$message({\n        message: \"这首歌暂无版权\",\n        type: \"error\"\n      });\n      songDetals.timer = false;\n      setTimeout(() => {\n        songDetals.timer = true;\n      }, 3000);\n      return;\n    }\n\n    if (songDetals.fee == 1) {\n      that.$message({\n        message: \"VIP歌曲 - 只能试听30s\",\n        type: \"warning\"\n      });\n    } // 获取歌词\n    // getSongLyric({\n    //   id: id,\n    // }).then((res) => {\n    //   songlrc = res.data.lrc.lyric;\n    // }),\n\n\n    that.$store.commit(\"aplayer/addSONG\", {\n      name: songDetals.name,\n      //歌曲名\n      artist: songDetals.ar[0].name,\n      //作者\n      // url: songUrlAdd,\n      url: `https://music.163.com/song/media/outer/url?id=${songDetals.id}.mp3`,\n      cover: songDetals.al.picUrl,\n      //   lrc: songlrc,\n      id: songDetals.id\n    });\n    songDetals.timer = false;\n    setTimeout(() => {\n      songDetals.timer = true;\n    }, 3000);\n  }\n} //播放试听音乐\n\nexport async function listenMusic(songDetals, that) {\n  console.log(songDetals, \"歌曲信息----\");\n  let songUrlAdd = null;\n  let songlrc = \"\";\n\n  if (songDetals.timer) {\n    if (songDetals.noCopyrightRcmd) {\n      that.$message({\n        message: \"这首歌暂无版权\",\n        type: \"error\"\n      });\n      songDetals.timer = false;\n      setTimeout(() => {\n        songDetals.timer = true;\n      }, 3000);\n      return;\n    }\n\n    if (songDetals.fee == 1) {\n      that.$message({\n        message: \"VIP歌曲 - 只能试听30s\",\n        type: \"warning\"\n      });\n      await playMusicUrl({\n        id: songDetals.id\n      }).then(res => {\n        // console.log(\"播放音乐链接\", res.data.data[0].url);\n        if (res.data.data[0].url) {\n          songUrlAdd = res.data.data[0].url;\n\n          if (songUrlAdd != null) {\n            that.$store.commit(\"aplayer/addAUDITION\", {\n              name: songDetals.name,\n              //歌曲名\n              artist: songDetals.ar[0].name,\n              //作者\n              url: songUrlAdd,\n              cover: songDetals.al.picUrl,\n              // lrc: songlrc,\n              id: songDetals.id,\n              timer: true //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\n\n            });\n          }\n        }\n      }); // 获取歌词\n      //   getSongLyric({\n      //     id: id,\n      //   }).then((res) => {\n      //     songlrc = res.data.lrc.lyric;\n      //   });\n    } else if (songDetals.fee == 0 || songDetals.fee == 8) {\n      that.$store.commit(\"aplayer/addAUDITION\", {\n        name: songDetals.name,\n        //歌曲名\n        artist: songDetals.ar[0].name,\n        //作者\n        // url: songUrlAdd,\n        url: `https://music.163.com/song/media/outer/url?id=${songDetals.id}.mp3`,\n        cover: songDetals.al.picUrl,\n        // lrc: songlrc,\n        id: songDetals.id,\n        timer: true //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\n\n      });\n    }\n\n    songDetals.timer = false;\n    setTimeout(() => {\n      songDetals.timer = true;\n    }, 3000);\n  }\n}","map":{"version":3,"sources":["D:/data/桌面/git/cloudMusic-Source-Code/src/utils/musicPlay.js"],"names":["playMusicUrl","getSongLyric","playMusic","songDetals","that","console","log","songlrc","timer","noCopyrightRcmd","$message","message","type","setTimeout","fee","$store","commit","name","artist","ar","url","id","cover","al","picUrl","listenMusic","songUrlAdd","then","res","data"],"mappings":"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","sourcesContent":["import { playMusicUrl, getSongLyric } from \"@/api/api\";\r\n\r\n//添加歌曲到播放列表\r\nexport async function playMusic(songDetals, that) {\r\n  //获取播放音乐链接\r\n  console.log(songDetals, \"歌曲信息----\");\r\n  let songlrc = \"\"; //歌词\r\n  if (songDetals.timer) {\r\n    if (songDetals.noCopyrightRcmd) {\r\n      that.$message({\r\n        message: \"这首歌暂无版权\",\r\n        type: \"error\",\r\n      });\r\n      songDetals.timer = false;\r\n      setTimeout(() => {\r\n        songDetals.timer = true;\r\n      }, 3000);\r\n      return;\r\n    }\r\n    if (songDetals.fee == 1) {\r\n      that.$message({\r\n        message: \"VIP歌曲 - 只能试听30s\",\r\n        type: \"warning\",\r\n      });\r\n    }\r\n    // 获取歌词\r\n    // getSongLyric({\r\n    //   id: id,\r\n    // }).then((res) => {\r\n    //   songlrc = res.data.lrc.lyric;\r\n    // }),\r\n    that.$store.commit(\"aplayer/addSONG\", {\r\n      name: songDetals.name, //歌曲名\r\n      artist: songDetals.ar[0].name, //作者\r\n      // url: songUrlAdd,\r\n      url: `https://music.163.com/song/media/outer/url?id=${songDetals.id}.mp3`,\r\n      cover: songDetals.al.picUrl,\r\n      //   lrc: songlrc,\r\n      id: songDetals.id,\r\n    });\r\n    songDetals.timer = false;\r\n    setTimeout(() => {\r\n      songDetals.timer = true;\r\n    }, 3000);\r\n  }\r\n}\r\n\r\n//播放试听音乐\r\nexport async function listenMusic(songDetals, that) {\r\n  console.log(songDetals, \"歌曲信息----\");\r\n  let songUrlAdd = null;\r\n  let songlrc = \"\";\r\n  if (songDetals.timer) {\r\n    if (songDetals.noCopyrightRcmd) {\r\n      that.$message({\r\n        message: \"这首歌暂无版权\",\r\n        type: \"error\",\r\n      });\r\n      songDetals.timer = false;\r\n      setTimeout(() => {\r\n        songDetals.timer = true;\r\n      }, 3000);\r\n      return;\r\n    }\r\n    if (songDetals.fee == 1) {\r\n      that.$message({\r\n        message: \"VIP歌曲 - 只能试听30s\",\r\n        type: \"warning\",\r\n      });\r\n      await playMusicUrl({\r\n        id: songDetals.id,\r\n      }).then((res) => {\r\n        // console.log(\"播放音乐链接\", res.data.data[0].url);\r\n        if (res.data.data[0].url) {\r\n          songUrlAdd = res.data.data[0].url;\r\n          if (songUrlAdd != null) {\r\n            that.$store.commit(\"aplayer/addAUDITION\", {\r\n              name: songDetals.name, //歌曲名\r\n              artist: songDetals.ar[0].name, //作者\r\n              url: songUrlAdd,\r\n              cover: songDetals.al.picUrl,\r\n              // lrc: songlrc,\r\n              id: songDetals.id,\r\n              timer: true, //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\r\n            });\r\n          }\r\n        }\r\n      });\r\n      // 获取歌词\r\n      //   getSongLyric({\r\n      //     id: id,\r\n      //   }).then((res) => {\r\n      //     songlrc = res.data.lrc.lyric;\r\n      //   });\r\n    } else if (songDetals.fee == 0 || songDetals.fee == 8) {\r\n      that.$store.commit(\"aplayer/addAUDITION\", {\r\n        name: songDetals.name, //歌曲名\r\n        artist: songDetals.ar[0].name, //作者\r\n        // url: songUrlAdd,\r\n        url: `https://music.163.com/song/media/outer/url?id=${songDetals.id}.mp3`,\r\n        cover: songDetals.al.picUrl,\r\n        // lrc: songlrc,\r\n        id: songDetals.id,\r\n        timer: true, //试听中添加，防止用户连点消耗性能，在添加播放列表方法中可使用到\r\n      });\r\n    }\r\n    songDetals.timer = false;\r\n    setTimeout(() => {\r\n      songDetals.timer = true;\r\n    }, 3000);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}