{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getMVUrl, getcommentMV, getMvDetails, getMvDetailInfo } from \"@/api/api\";\nexport default {\n  // props: ['mvId'],\n  data: function data() {\n    return {\n      mvUrl: \"\",\n      mvName: false,\n      mvId: \"\",\n      mvComments: [],\n      mvDetail: {},\n      count: \"\",\n      currentPage: 1\n    };\n  },\n  created: function created() {\n    //缓存id,解决params数据在刷新页面后丢失，导致无法获取到歌单id\n    if (this.$route.params.length) {\n      this.mvName = this.$route.params.mvName;\n      this.mvId = this.$route.params.mvId;\n      localStorage.setItem('mvName', this.$route.params.mvName);\n    } else {\n      this.mvName = localStorage.getItem('params.mvName');\n      this.mvId = localStorage.getItem('params.mvId');\n    }\n\n    this.playMV();\n  },\n  methods: {\n    //mv分页\n    videohandleCurrentChange: function videohandleCurrentChange(currentPage) {\n      // console.log(`当前页: ${currentPage}`);\n      this.currentPage = currentPage; // console.log(\"我是第一\"+this.currentPage)\n\n      this.playMV(this.mvId, currentPage);\n    },\n    playMV: function playMV() {\n      var _this = this;\n\n      var params = {\n        id: this.$route.query.mvId\n      };\n      getMVUrl(params).then(function (res) {\n        _this.mvUrl = res.data.data.url;\n      }); //mv详情\n\n      getMvDetails(params).then(function (res) {\n        // console.log(\"mv详情---：\", res.data.data);\n        _this.mvDetail = res.data.data; // mv点赞转发评论数数据\n\n        getMvDetailInfo(params).then(function (res) {\n          // console.log(\"mv点赞转发评论数数据---:\", res.data);\n          _this.$set(_this.mvDetail, \"likedCount\", res.data.likedCount);\n        });\n      }); // 热门评论;\n\n      getcommentMV({\n        id: this.$route.query.mvId,\n        limit: 8,\n        offset: (this.currentPage - 1) * 8\n      }).then(function (res) {\n        _this.mvComments = res.data.comments; // console.log(\"我是评论\" + this.mvComments);\n\n        _this.count = res.data.total; // console.log(\"我是最后面\"+page)\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4MA,SACAA,QADA,EAEAC,YAFA,EAGAC,YAHA,EAIAC,eAJA,QAKA,WALA;AAMA;AACA;AACAC,MAFA,kBAEA;AACA;AACAC,eADA;AAEAC,mBAFA;AAGAC,cAHA;AAIAC,oBAJA;AAKAC,kBALA;AAMAC,eANA;AAOAC;AAPA;AASA,GAZA;AAaAC,SAbA,qBAaA;AACA;AACA;AACA;AACA;AACAC;AACA,KAJA,MAIA;AACA;AACA;AACA;;AACA;AACA,GAxBA;AAyBAC;AACA;AACAC;AACA;AACA,qCAFA,CAGA;;AACA;AACA,KAPA;AAQAC,UARA,oBAQA;AAAA;;AACA;AACAC;AADA;AAGAjB;AACA;AACA,OAFA,EAJA,CAOA;;AACAE;AACA;AACA,uCAFA,CAGA;;AACAC;AACA;AACA;AACA,SAHA;AAIA,OARA,EARA,CAiBA;;AACAF;AACAgB,kCADA;AAEAC,gBAFA;AAGAC;AAHA,SAIAC,IAJA,CAIA;AACA,6CADA,CAEA;;AACA,qCAHA,CAIA;AACA,OATA;AAUA;AApCA;AAzBA","names":["getMVUrl","getcommentMV","getMvDetails","getMvDetailInfo","data","mvUrl","mvName","mvId","mvComments","mvDetail","count","currentPage","created","localStorage","methods","videohandleCurrentChange","playMV","id","limit","offset","then"],"sourceRoot":"src/views/mvPlay","sources":["mvPlay.vue"],"sourcesContent":["<style lang=\"less\" scoped>\r\n.recMv {\r\n  width: 1100px;\r\n  padding: 0 10px;\r\n\r\n  margin: 10px auto;\r\n\r\n  max-height: 700px;\r\n  border-radius: 0 0 10px 10px;\r\n  background: rgba(95, 158, 160, 0.322);\r\n  overflow-x: hidden;\r\n\r\n  &::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n\r\n  .mvTitle {\r\n    font-size: 20px;\r\n  }\r\n\r\n  .recMvwrap {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    flex-wrap: wrap; //根据宽度限制一行的盒子个数\r\n    margin-bottom: 10px;\r\n    border-radius: 10px;\r\n    padding: 10px;\r\n    border-radius: 10px;\r\n    background: rgba(95, 158, 160, 0.322);\r\n  }\r\n}\r\n.mvDetail {\r\n  padding: 10px 50px;\r\n  // height: 100px;\r\n  // background: rgb(226, 211, 211);\r\n  .authorImg {\r\n    display: inline-block;\r\n    width: 50px;\r\n    height: 50px;\r\n    border-radius: 25px;\r\n    overflow: hidden;\r\n    vertical-align: top;\r\n    img {\r\n      width: 100%;\r\n      height: 100%;\r\n      // vertical-align: top;\r\n    }\r\n  }\r\n  .authorName {\r\n    display: inline-block;\r\n    margin-left: 25px;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    font-size: 18px;\r\n  }\r\n  .mvTitle {\r\n    margin-bottom: 10px;\r\n  }\r\n  ul {\r\n    margin: 10px 0;\r\n    .mvTag {\r\n      display: inline-block;\r\n      margin: 0 5px;\r\n      padding: 2px 5px;\r\n      background: rgba(231, 217, 192, 0.349);\r\n      border-radius: 10px;\r\n    }\r\n  }\r\n  .smallFont {\r\n    margin-right: 10px;\r\n    height: 20px;\r\n    line-height: 20px;\r\n    font-size: 12px;\r\n    color: rgba(233, 233, 233, 0.829);\r\n  }\r\n  .border {\r\n    margin: 0 5px 0 0;\r\n    padding: 0 10px;\r\n    height: 25px;\r\n    line-height: 25px;\r\n    font-size: 15px;\r\n    color: rgb(247, 245, 245);\r\n    border-radius: 10px;\r\n    border: 1px solid white;\r\n  }\r\n}\r\n.pagination {\r\n  /deep/ .el-pager {\r\n    background: none !important;\r\n  }\r\n  /deep/ .number,\r\n  /deep/ .btn-prev,\r\n  /deep/ .btn-quicknext,\r\n  /deep/ .btn-next,\r\n  /deep/ .el-input__inner,\r\n  /deep/ .more {\r\n    color: #f2fff7 !important;\r\n    transition: 0.2s;\r\n    background: transparent !important;\r\n  }\r\n  /deep/ .number:hover,\r\n  /deep/ .btn-prev:hover,\r\n  /deep/ .btn-quicknext:hover,\r\n  /deep/ .btn-next:hover,\r\n  /deep/ .el-input__inner:hover,\r\n  /deep/ .more:hover {\r\n    transform: scale(1.02);\r\n    color: #f7a588 !important;\r\n  }\r\n  /deep/ .active {\r\n    color: #f7a588 !important;\r\n  }\r\n  /deep/ .el-input__inner {\r\n    border: none;\r\n  }\r\n  /deep/ .el-pagination__jump {\r\n    color: #f7dd88 !important;\r\n  }\r\n  /deep/.el-pagination {\r\n    height: 100%;\r\n  }\r\n}\r\n</style>\r\n<template>\r\n  <!-- 推荐歌单 -->\r\n  <div class=\"recMv\"\r\n       style=\"border-radius: 10px\">\r\n    <div v-if=\"mvId\"\r\n         style=\"margin: 0 auto; width: 95%\">\r\n      <video controls\r\n             autoplay\r\n             loop\r\n             :src=\"mvUrl\"\r\n             style=\"margin: 10px 0; width: 100%; height: 580px\"></video>\r\n    </div>\r\n\r\n    <div class=\"mvDetail\">\r\n      <div>\r\n        <div style=\"margin-bottom: 10px\">\r\n          <div class=\"authorImg\">\r\n            <img :src=\"mvDetail.cover\"\r\n                 alt=\"\" />\r\n          </div>\r\n          <span class=\"authorName\">{{ mvDetail.artistName }}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div style=\"margin-bottom: 10px\">\r\n        <span class=\"mvTitle\">{{ mvDetail.name }} </span>\r\n      </div>\r\n      <div>\r\n        <span class=\"smallFont\">发布：{{ mvDetail.publishTime }}</span>\r\n        <span class=\"smallFont\">播放：{{ mvDetail.playCount }}次</span>\r\n      </div>\r\n\r\n      <p style=\"margin-top: 10px\">{{ mvDetail.desc }}</p>\r\n      <ul>\r\n        <li class=\"mvTag\"\r\n            v-for=\"item in mvDetail.videoGroup\"\r\n            :key=\"item.id\">\r\n          {{ item.name }}\r\n        </li>\r\n      </ul>\r\n      <div>\r\n        <span class=\"smallFont border\">赞{{ mvDetail.likedCount }}</span>\r\n        <span class=\"smallFont border\">收藏{{ mvDetail.subCount }}</span>\r\n        <span class=\"smallFont border\">分享{{ mvDetail.shareCount }}</span>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"mvId\"\r\n         style=\"padding: 0px 50px\">\r\n      <h3 style=\"margin: 5px 0 10px 0; text-align: center\">\r\n        评论({{ count }}条)\r\n      </h3>\r\n      <div class=\"hoverBackColor\"\r\n           v-for=\"item in mvComments\"\r\n           :key=\"item.id\">\r\n        <img :src=\"item.user.avatarUrl\"\r\n             style=\"width: 50px; border-radius: 25px\" />\r\n        <span style=\"display: inline-block; margin-left: 10px; font-size: 15px\">{{ item.user.nickname }}&nbsp;&nbsp;:&nbsp;&nbsp;</span>\r\n        <span style=\"margin-left: 20px; width: 750px\">\r\n          {{ item.content }}\r\n        </span>\r\n        <div style=\"height: 30px\">\r\n          <span style=\"float: right; width: 130px\">&nbsp;&nbsp;时间：{{ item.timeStr }}</span><span style=\"float: right\">{{ item.likedCount }} 赞&nbsp;&nbsp;&nbsp;</span>\r\n        </div>\r\n      </div>\r\n      <!-- //评论分页 -->\r\n    </div>\r\n    <div class=\"pagination\"\r\n         style=\"text-align: center; padding-top: 10px; box-sizing: border-box\">\r\n      <el-pagination v-if=\"count != 0\"\r\n                     @current-change=\"videohandleCurrentChange\"\r\n                     :current-page.sync=\"currentPage\"\r\n                     :page-size=\"8\"\r\n                     layout=\"prev, pager, next, jumper\"\r\n                     :total=\"count\"\r\n                     :background=\"true\">\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getMVUrl,\r\n  getcommentMV,\r\n  getMvDetails,\r\n  getMvDetailInfo,\r\n} from \"@/api/api\";\r\nexport default {\r\n  // props: ['mvId'],\r\n  data () {\r\n    return {\r\n      mvUrl: \"\",\r\n      mvName: false,\r\n      mvId: \"\",\r\n      mvComments: [],\r\n      mvDetail: {},\r\n      count: \"\",\r\n      currentPage: 1,\r\n    };\r\n  },\r\n  created () {\r\n    //缓存id,解决params数据在刷新页面后丢失，导致无法获取到歌单id\r\n    if (this.$route.params.length) {\r\n      this.mvName = this.$route.params.mvName;\r\n      this.mvId = this.$route.params.mvId;\r\n      localStorage.setItem('mvName', this.$route.params.mvName)\r\n    } else {\r\n      this.mvName = localStorage.getItem('params.mvName')\r\n      this.mvId = localStorage.getItem('params.mvId')\r\n    }\r\n    this.playMV();\r\n  },\r\n  methods: {\r\n    //mv分页\r\n    videohandleCurrentChange: function (currentPage) {\r\n      // console.log(`当前页: ${currentPage}`);\r\n      this.currentPage = currentPage;\r\n      // console.log(\"我是第一\"+this.currentPage)\r\n      this.playMV(this.mvId, currentPage);\r\n    },\r\n    playMV () {\r\n      let params = {\r\n        id: this.$route.query.mvId,\r\n      };\r\n      getMVUrl(params).then((res) => {\r\n        this.mvUrl = res.data.data.url;\r\n      });\r\n      //mv详情\r\n      getMvDetails(params).then((res) => {\r\n        // console.log(\"mv详情---：\", res.data.data);\r\n        this.mvDetail = res.data.data;\r\n        // mv点赞转发评论数数据\r\n        getMvDetailInfo(params).then((res) => {\r\n          // console.log(\"mv点赞转发评论数数据---:\", res.data);\r\n          this.$set(this.mvDetail, \"likedCount\", res.data.likedCount);\r\n        });\r\n      });\r\n      // 热门评论;\r\n      getcommentMV({\r\n        id: this.$route.query.mvId,\r\n        limit: 8,\r\n        offset: (this.currentPage - 1) * 8,\r\n      }).then((res) => {\r\n        this.mvComments = res.data.comments;\r\n        // console.log(\"我是评论\" + this.mvComments);\r\n        this.count = res.data.total;\r\n        // console.log(\"我是最后面\"+page)\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n"]},"metadata":{},"sourceType":"module"}