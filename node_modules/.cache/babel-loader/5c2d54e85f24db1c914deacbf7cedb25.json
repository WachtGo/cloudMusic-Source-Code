{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapMutations, mapState } from \"vuex\";\nimport { getDownloadUrl } from \"@/api/api\";\nimport { playMusic, listenMusic } from \"@/utils/musicPlay\";\nimport { likeMusic } from \"@/api/needLogin/musicOperate\";\nimport { download } from \"@/utils/commonApi\";\nexport default {\n  props: {\n    songlist: Array\n  },\n\n  data() {\n    return {};\n  },\n\n  computed: { ...mapState(\"aplayer\", [\"currentPlayMusic\"])\n  },\n  methods: {\n    //获取歌曲详情,进入详情页面\n    goSongDetails(songDetails) {\n      // console.log('歌曲信息',songDetails)\n      this.$router.push({\n        name: \"songDetails\",\n        params: {\n          songDetails: songDetails\n        }\n      });\n    },\n\n    /*  //加入/删除喜欢音乐\r\n     likeMusic(id, bool) {\r\n       const loading = this.$loading({\r\n         target: \"#app_body\",\r\n         background: \"rgba(255,255,255,0.1)\",\r\n       });\r\n       likeMusic({ id: id, like: bool })\r\n         .then((res) => {\r\n           this.$nextTick(() => {\r\n             loading.close();\r\n           });\r\n           console.log(\"添加\", res);\r\n           if (res.data.code === 200) {\r\n             if (bool) {\r\n               this.$message.success(\"已添加入我的喜欢-可进入网易云音乐查看\");\r\n               return;\r\n             }\r\n             this.$message.success(\"已从我的喜欢列表删除\");\r\n           }\r\n         })\r\n         .catch((error) => {\r\n           this.$nextTick(() => {\r\n             loading.close();\r\n           });\r\n         });\r\n     }, */\n    //试听音乐\n    listenMusic(songDetals) {\n      //获取播放音乐链接\n      var that = this; // var list = \"songlist\";\n      // console.log(songDetals)\n\n      listenMusic(songDetals, that);\n    },\n\n    //添加歌曲到播放列表\n    playMusic(songDetals) {\n      //获取播放音乐链接\n      var that = this; // var list = \"songlist\";\n\n      playMusic(songDetals, that);\n    },\n\n    playMV(mvId) {\n      //获取mv播放链接\n      this.$router.push({\n        name: \"mvPlay\",\n        params: {\n          mvId: mvId\n        }\n      });\n    },\n\n    //获取歌曲下载地址\n    getDownloadUrl(songId, songName, songArtist) {\n      let musicfilename = songName + ' - ' + songArtist;\n      var that = this;\n      that.$message({\n        type: \"success\",\n        message: \"正在尝试下载\"\n      });\n      let params = {\n        id: songId\n      };\n      getDownloadUrl(params).then(res => {\n        // console.log('歌曲下载地址：', res.data)\n        // console.log(\"歌曲下载地址：\", res.data.data.url);\n        // download(res.data.data.url, songName)\n        download(res.data.data[0].url, musicfilename);\n        that.$message({\n          type: \"success\",\n          message: \"开始下载了\"\n        });\n      });\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}