{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getAlbumContent, getDownloadUrl } from \"@/api/api\";\nimport { transMusicTime, download } from \"@/utils/commonApi\";\nimport songlist from \"@/components/songlist.vue\";\nexport default {\n  components: {\n    songlist\n  },\n\n  data() {\n    return {\n      listen: [],\n      albumId: \"\",\n      albumSongs: [],\n      albumDesc: {\n        artist: {\n          img1v1Url: \"\"\n        }\n      }\n    };\n  },\n\n  mounted() {\n    //进入专辑详情，判断是否有路由信息传入\n    if (this.$route.params.albumDesc) {\n      this.albumDesc = this.$route.params.albumDesc;\n      localStorage.setItem(\"albumDesc\", JSON.stringify(this.$route.params.albumDesc));\n      this.getAlbumContent();\n    } else {\n      //没有路由信息，说明刷新了页面，则尝试使用之前的缓存信息\n      this.albumDesc = JSON.parse(localStorage.getItem(\"albumDesc\"));\n    } //获取专辑信息\n\n\n    this.getAlbumContent();\n  },\n\n  methods: {\n    getAlbumContent() {\n      var that = this;\n      let params = {\n        id: that.albumDesc.id\n      };\n      getAlbumContent(params).then(res => {\n        // console.log(\"专辑信息---：\", res.data.album);\n        // console.log(\"专辑歌曲---：\", res.data.songs);\n        that.albumSongs = res.data.songs;\n        that.albumDesc = res.data.album; //给每个列表添加一个防抖\n\n        for (let item of that.albumSongs) {\n          that.$set(item, \"timer\", true);\n        }\n\n        let dt = \"dt\";\n        transMusicTime(that.albumSongs, dt);\n      });\n    } //根据主题更换播放器颜色\n    // randomColor() {\n    //   return `#${((Math.random() * 0xffffff) << 0).toString(16)}`\n    // },\n\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}