{"ast":null,"code":"import _asyncToGenerator from \"D:/data/\\u684C\\u9762/git/cloudMusic-Source-Code/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"D:/data/\\u684C\\u9762/git/cloudMusic-Source-Code/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"regenerator-runtime/runtime.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapMutations, mapState } from \"vuex\";\nimport { getSongDetails } from \"@/api/api\";\nimport { playMusic } from \"@/utils/musicPlay\";\nexport default {\n  data: function data() {\n    return {};\n  },\n  computed: _objectSpread({}, mapState(\"aplayer\", [\"audio\", \"audition\", \"musicAudioStatu\"])),\n  mounted: function mounted() {},\n  methods: _objectSpread(_objectSpread({}, mapMutations(\"aplayer\", [\"deleteMUSIC\", \"deleteAUDITION\", \"changeAPLAYER\"])), {}, {\n    //播放指定歌曲\n    playMusic: function playMusic(idx) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var aplayer;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.changeAPLAYER(0);\n\n              case 2:\n                //切换播放器\n                aplayer = _this.$refs.aplayer; //获取当前播放器\n                // console.log(aplayer)\n\n                aplayer.switch(idx); //切换到播放当前下标的歌曲\n\n                aplayer.toggle(); //切换播放/暂停\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    //删除歌曲\n    deleteMusic: function deleteMusic(idx) {\n      // this.$store.commit('deleteMusic',idx)\n      this.deleteMUSIC(idx);\n    },\n    //试听的播放/暂停\n    playAudition: function playAudition() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var auditions;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _this2.changeAPLAYER(1);\n\n              case 2:\n                //切换到试听播放器\n                auditions = _this2.$refs.auditions; //获取当前播放器\n                // console.log(auditions)\n                // auditions.switch(0); //切换到播放当前下标的歌曲\n\n                auditions.toggle(); //切换播放/暂停\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    //删除试听\n    deleteAudition: function deleteAudition(idx) {\n      this.deleteAUDITION(idx);\n    },\n    //添加到播放列表\n    addListenMusic: function addListenMusic(id) {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var that, list;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                that = _this3;\n                list = \"audition\";\n                _context3.next = 4;\n                return getSongDetails({\n                  ids: id\n                }).then(function (res) {\n                  playMusic(id, res.data.songs[0].fee, 0, list, that);\n                });\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    }\n  }),\n  directives: {\n    drag: function drag(el) {\n      // let dragBox = el.parentElement.parentElement; //获取移动的元素\n      var dragBox = document.getElementsByClassName(\"musicWrap\");\n\n      el.onmousedown = function (e) {\n        //鼠标点击时鼠标的的位置\n        // console.log(e)\n        // console.log(el.parentElement)\n        var downX = e.clientX;\n        var downY = e.clientY; //元素位置\n\n        var left = dragBox[0].offsetLeft;\n        var top = dragBox[0].offsetTop; // console.log(e.clientX,e.clientY)\n        // console.log('app位置：',dragBox.offsetLeft,dragBox.offsetTop)\n\n        document.onmousemove = function (e) {\n          //鼠标移动的距离\n          var moveX = e.clientX - downX;\n          var moveY = e.clientY - downY; // console.log('鼠标移动:',moveX,moveY)\n          //移动当前元素\n\n          dragBox[0].style.left = left + moveX + \"px\";\n          dragBox[0].style.top = top + moveY + \"px\";\n        };\n\n        document.onmouseup = function (e) {\n          //鼠标弹起来的时候不再移动\n          document.onmousemove = null; //预防鼠标弹起来后还会循环（即预防鼠标放上去的时候还会移动）\n\n          document.onmouseup = null;\n        };\n      };\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}