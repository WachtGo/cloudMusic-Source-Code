{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getDownloadUrl as _getDownloadUrl } from \"@/api/api\";\nimport { playMusic as _playMusic, listenMusic as _listenMusic } from \"@/utils/musicPlay\";\nexport default {\n  props: {\n    songlist: Array\n  },\n  data: function data() {\n    return {};\n  },\n  methods: {\n    //获取歌曲详情,进入详情页面\n    goSongDetails: function goSongDetails(ids) {\n      this.$router.push({\n        name: \"songDetails\",\n        params: {\n          songId: ids\n        }\n      });\n    },\n    //试听音乐\n    listenMusic: function listenMusic(id, fee, index) {\n      //获取播放音乐链接\n      var that = this;\n      var list = \"musicList\";\n\n      _listenMusic(id, fee, index, list, that);\n    },\n    //添加歌曲到播放列表\n    playMusic: function playMusic(id, fee, index) {\n      //获取播放音乐链接\n      var that = this;\n      var list = \"musicList\";\n\n      _playMusic(id, fee, index, list, that);\n    },\n    playMV: function playMV(mvId) {\n      //获取mv播放链接\n      this.$router.push({\n        name: \"mvPlay\",\n        params: {\n          mvId: mvId\n        }\n      });\n    },\n    //获取歌曲下载地址\n    getDownloadUrl: function getDownloadUrl(songId, songName) {\n      var that = this;\n      that.$message({\n        type: \"success\",\n        message: \"正在尝试下载\"\n      });\n      var params = {\n        id: songId\n      };\n\n      _getDownloadUrl(params).then(function (res) {\n        // console.log('歌曲下载地址：', res.data)\n        // console.log(\"歌曲下载地址：\", res.data.data.url);\n        // download(res.data.data.url, songName)\n        download(res.data.data[0].url, songName);\n        that.$message({\n          type: \"success\",\n          message: \"开始下载了\"\n        });\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACAA;AACAC;AADA,GADA;AAIAC,MAJA,kBAIA;AACA;AACA,GANA;AAOAC;AACA;AACAC,iBAFA,yBAEAC,GAFA,EAEA;AACA;AACAC,2BADA;AAEAC;AACAC;AADA;AAFA;AAMA,KATA;AAUA;AACAC,eAXA,uBAWAC,EAXA,EAWAC,GAXA,EAWAC,KAXA,EAWA;AACA;AACA;AACA;;AACAH;AACA,KAhBA;AAiBA;AACAI,aAlBA,qBAkBAH,EAlBA,EAkBAC,GAlBA,EAkBAC,KAlBA,EAkBA;AACA;AACA;AACA;;AACAC;AACA,KAvBA;AAwBAC,UAxBA,kBAwBAC,IAxBA,EAwBA;AACA;AACA;AACAT,sBADA;AAEAC;AAAAQ;AAAA;AAFA;AAIA,KA9BA;AA+BA;AACAC,kBAhCA,0BAgCAR,MAhCA,EAgCAS,QAhCA,EAgCA;AACA;AACAC;AACAC,uBADA;AAEAC;AAFA;AAIA;AACAV;AADA;;AAGAM;AACA;AACA;AACA;AACAK;AACAH;AACAC,yBADA;AAEAC;AAFA;AAIA,OATA;AAUA;AAnDA;AAPA","names":["props","songlist","data","methods","goSongDetails","ids","name","params","songId","listenMusic","id","fee","index","playMusic","playMV","mvId","getDownloadUrl","songName","that","type","message","download"],"sourceRoot":"src/components","sources":["songlist.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div\r\n      class=\"music-list\"\r\n      \r\n      v-for=\"(item, index) in songlist\"\r\n      :key=\"item.id\"\r\n    >\r\n      <div style=\"width: 20px\">{{ index + 1 }}.</div>\r\n      <!-- <div @dblclick=\"goSongDetails(item.id)\"></div> -->\r\n\r\n      <div class=\"music-list-info\">{{ item.name }}</div>\r\n      <div class=\"music-list-info\">{{ item.ar[0].name }}</div>\r\n      <div class=\"music-list-info\">{{ item.dt }}</div>\r\n\r\n      <div class=\"option\">\r\n        <!-- 试听 -->\r\n        <span @click=\"listenMusic(item.id, item.fee, index)\"><i class=\"el-icon-headset iconhover\"></i></span>\r\n        <!-- 添加到播放列表 -->\r\n        <span\r\n          v-if=\"item.fee == 0\"\r\n          @click.stop=\"playMusic(item.id, item.fee, index)\"\r\n        ><i class=\"el-icon-folder-add iconhover\"></i>\r\n        </span>\r\n        <!-- 播放MV -->\r\n        <span\r\n          v-if=\"Boolean(item.mv)\"\r\n          @click.stop=\"playMV(item.mv)\"\r\n        ><i class=\"el-icon-video-camera iconhover\"></i>\r\n        </span>\r\n        <!-- 下载 -->\r\n        <span\r\n          v-if=\"item.fee == 0 \"\r\n          @click=\"getDownloadUrl(item.id, item.name)\"\r\n        >\r\n          <i class=\"el-icon-download iconhover\"></i></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { getDownloadUrl } from \"@/api/api\";\r\nimport { playMusic, listenMusic } from \"@/utils/musicPlay\";\r\nexport default {\r\n  props: {\r\n    songlist: Array,\r\n  },\r\n  data() {\r\n    return {};\r\n  },\r\n  methods: {\r\n    //获取歌曲详情,进入详情页面\r\n    goSongDetails(ids) {\r\n      this.$router.push({\r\n        name: \"songDetails\",\r\n        params: {\r\n          songId: ids,\r\n        },\r\n      });\r\n    },\r\n    //试听音乐\r\n    listenMusic(id, fee, index) {\r\n      //获取播放音乐链接\r\n      var that = this;\r\n      var list = \"musicList\";\r\n      listenMusic(id, fee, index, list, that);\r\n    },\r\n    //添加歌曲到播放列表\r\n    playMusic(id, fee, index) {\r\n      //获取播放音乐链接\r\n      var that = this;\r\n      var list = \"musicList\";\r\n      playMusic(id, fee, index, list, that);\r\n    },\r\n    playMV(mvId) {\r\n      //获取mv播放链接\r\n      this.$router.push({\r\n        name: \"mvPlay\",\r\n        params: { mvId: mvId },\r\n      });\r\n    },\r\n    //获取歌曲下载地址\r\n    getDownloadUrl(songId, songName) {\r\n      var that = this;\r\n      that.$message({\r\n        type: \"success\",\r\n        message: \"正在尝试下载\",\r\n      });\r\n      let params = {\r\n        id: songId,\r\n      };\r\n      getDownloadUrl(params).then((res) => {\r\n        // console.log('歌曲下载地址：', res.data)\r\n        // console.log(\"歌曲下载地址：\", res.data.data.url);\r\n        // download(res.data.data.url, songName)\r\n        download(res.data.data[0].url, songName);\r\n        that.$message({\r\n          type: \"success\",\r\n          message: \"开始下载了\",\r\n        });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" >\r\n.music-list {\r\n  position: relative;\r\n  display: flex;\r\n  align-content: center;\r\n  justify-content: space-around;\r\n  margin: 5px auto 5px;\r\n  padding: 0 15px;\r\n  width: 96%;\r\n  //   height: 30px;\r\n  //   line-height: 30px;\r\n  overflow: hidden;\r\n  color: rgba(255, 255, 255, 1);\r\n  font-weight: bolder;\r\n  border-radius: 5px;\r\n  -o-text-overflow: ellipsis;\r\n  text-overflow: ellipsis;\r\n  background-color: rgba(99, 187, 162, 0.044);\r\n      border-radius: 15px;\r\n  transition: 0.2s;\r\n\r\n  .music-list-index {\r\n    position: absolute;\r\n    left: 0;\r\n    width: 3%;\r\n  }\r\n  .music-list-info {\r\n    width: 25%;\r\n    // font-size:13px;\r\n    text-align: center;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n  .option {\r\n    display: inline-block;\r\n    margin-left: 5%;\r\n    width: 10%;\r\n    box-sizing: border-box;\r\n\r\n    span {\r\n      display: inline-block;\r\n      width: 25%;\r\n      &:hover {\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n\r\n  &:hover {\r\n    color: rgb(88, 255, 241);\r\n    transform: scale(1.01);\r\n    // background: rgba(141, 251, 255, 0.192);\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}