{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getDownloadUrl as _getDownloadUrl } from \"@/api/api\";\nimport { playMusic as _playMusic, listenMusic as _listenMusic } from \"@/utils/musicPlay\";\nimport { likeMusic as _likeMusic } from \"@/api/needLogin/musicOperate\";\nimport { download } from \"@/utils/commonApi\";\nexport default {\n  props: {\n    songlist: Array\n  },\n  data: function data() {\n    return {};\n  },\n  methods: {\n    //获取歌曲详情,进入详情页面\n    goSongDetails: function goSongDetails(songDetails) {\n      // console.log('歌曲信息',songDetails)\n      this.$router.push({\n        name: \"songDetails\",\n        params: {\n          songDetails: songDetails\n        }\n      });\n    },\n    //加入/删除喜欢音乐\n    likeMusic: function likeMusic(id, bool) {\n      var _this = this;\n\n      _likeMusic({\n        id: id,\n        like: bool\n      }).then(function (res) {\n        // console.log(\"添加\", res);\n        if (res.data.code === 200) {\n          if (bool) {\n            _this.$message({\n              type: \"success\",\n              message: \"已添加入我的喜欢-可进入网易云音乐查看\"\n            });\n\n            return;\n          }\n\n          _this.$message({\n            type: \"success\",\n            message: \"已从我的喜欢列表删除\"\n          });\n        }\n      }).catch(function (res) {});\n    },\n    //试听音乐\n    listenMusic: function listenMusic(songDetals) {\n      //获取播放音乐链接\n      var that = this;\n      var list = \"songlist\";\n\n      _listenMusic(songDetals, that);\n    },\n    //添加歌曲到播放列表\n    playMusic: function playMusic(songDetals) {\n      //获取播放音乐链接\n      var that = this;\n      var list = \"songlist\";\n\n      _playMusic(songDetals, that);\n    },\n    playMV: function playMV(mvId) {\n      //获取mv播放链接\n      this.$router.push({\n        name: \"mvPlay\",\n        params: {\n          mvId: mvId\n        }\n      });\n    },\n    //获取歌曲下载地址\n    getDownloadUrl: function getDownloadUrl(songId, songName) {\n      var that = this;\n      that.$message({\n        type: \"success\",\n        message: \"正在尝试下载\"\n      });\n      var params = {\n        id: songId\n      };\n\n      _getDownloadUrl(params).then(function (res) {\n        // console.log('歌曲下载地址：', res.data)\n        // console.log(\"歌曲下载地址：\", res.data.data.url);\n        // download(res.data.data.url, songName)\n        download(res.data.data[0].url, songName);\n        that.$message({\n          type: \"success\",\n          message: \"开始下载了\"\n        });\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACAA;AACAC;AADA,GADA;AAIAC,MAJA,kBAIA;AACA;AACA,GANA;AAOAC;AACA;AACAC,iBAFA,yBAEAC,WAFA,EAEA;AACA;AACA;AACAC,2BADA;AAEAC;AACAF;AADA;AAFA;AAMA,KAVA;AAWA;AACAG,aAZA,qBAYAC,EAZA,EAYAC,IAZA,EAYA;AAAA;;AACAF;AAAAC;AAAAE;AAAA,SACAC,IADA,CACA;AACA;AACA;AACA;AACA;AACAC,6BADA;AAEAC;AAFA;;AAIA;AACA;;AACA;AACAD,2BADA;AAEAC;AAFA;AAIA;AACA,OAhBA,EAiBAC,KAjBA,CAiBA,iBAjBA;AAkBA,KA/BA;AAgCA;AACAC,eAjCA,uBAiCAC,UAjCA,EAiCA;AACA;AACA;AACA;;AACAD;AACA,KAtCA;AAuCA;AACAE,aAxCA,qBAwCAD,UAxCA,EAwCA;AACA;AACA;AACA;;AACAC;AACA,KA7CA;AA8CAC,UA9CA,kBA8CAC,IA9CA,EA8CA;AACA;AACA;AACAd,sBADA;AAEAC;AAAAa;AAAA;AAFA;AAIA,KApDA;AAqDA;AACAC,kBAtDA,0BAsDAC,MAtDA,EAsDAC,QAtDA,EAsDA;AACA;AACAC;AACAX,uBADA;AAEAC;AAFA;AAIA;AACAL;AADA;;AAGAY;AACA;AACA;AACA;AACAI;AACAD;AACAX,yBADA;AAEAC;AAFA;AAIA,OATA;AAUA;AAzEA;AAPA","names":["props","songlist","data","methods","goSongDetails","songDetails","name","params","likeMusic","id","bool","like","then","type","message","catch","listenMusic","songDetals","playMusic","playMV","mvId","getDownloadUrl","songId","songName","that","download"],"sourceRoot":"src/components","sources":["songlist.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"music-list\" v-for=\"(item, index) in songlist\" :key=\"item.id\">\r\n      <div style=\"width: 20px\">{{ index + 1 }}.</div>\r\n      <div @dblclick=\"goSongDetails(item)\" class=\"music-list-info\">\r\n        <div class=\"music-list-span\">{{ item.name }}</div>\r\n        <div class=\"music-list-span\">{{ item.ar[0].name }}</div>\r\n        <div class=\"music-list-span music-list-dt\">{{ item.dt }}</div>\r\n      </div>\r\n\r\n      <div class=\"option\">\r\n        <!-- 加入我的喜欢 -->\r\n        <span @click=\"likeMusic(item.id, true)\"\r\n          ><i class=\"iFont el-icon-star-on\"></i\r\n        ></span>\r\n        <!-- 从我的喜欢删除 -->\r\n        <span @click=\"likeMusic(item.id, false)\"\r\n          ><i class=\"iFont el-icon-star-off\"></i\r\n        ></span>\r\n        <!-- <i class=\"iFont el-icon-star-off\" @click=\"collectPlaylist\"></i> -->\r\n        <!-- 试听 -->\r\n        <span @click=\"listenMusic(item)\"\r\n          ><i class=\"el-icon-headset iconhover\"></i\r\n        ></span>\r\n        <!-- 添加到播放列表 -->\r\n        <span\r\n          v-if=\"item.fee == 0 || item.fee == 8\"\r\n          @click.stop=\"playMusic(item)\"\r\n          ><i class=\"el-icon-folder-add iconhover\"></i>\r\n        </span>\r\n        <!-- 播放MV -->\r\n        <span v-if=\"Boolean(item.mv)\" @click.stop=\"playMV(item.mv)\"\r\n          ><i class=\"el-icon-video-camera iconhover\"></i>\r\n        </span>\r\n        <!-- 下载 -->\r\n        <span\r\n          v-if=\"item.fee == 0 || item.fee == 8\"\r\n          @click=\"getDownloadUrl(item.id, item.name)\"\r\n        >\r\n          <i class=\"el-icon-download iconhover\"></i\r\n        ></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getDownloadUrl } from \"@/api/api\";\r\nimport { playMusic, listenMusic } from \"@/utils/musicPlay\";\r\nimport { likeMusic } from \"@/api/needLogin/musicOperate\";\r\nimport { download } from \"@/utils/commonApi\";\r\nexport default {\r\n  props: {\r\n    songlist: Array,\r\n  },\r\n  data() {\r\n    return {};\r\n  },\r\n  methods: {\r\n    //获取歌曲详情,进入详情页面\r\n    goSongDetails(songDetails) {\r\n      // console.log('歌曲信息',songDetails)\r\n      this.$router.push({\r\n        name: \"songDetails\",\r\n        params: {\r\n          songDetails: songDetails,\r\n        },\r\n      });\r\n    },\r\n    //加入/删除喜欢音乐\r\n    likeMusic(id, bool) {\r\n      likeMusic({ id: id, like: bool })\r\n        .then((res) => {\r\n          // console.log(\"添加\", res);\r\n          if (res.data.code === 200) {\r\n            if (bool) {\r\n              this.$message({\r\n                type: \"success\",\r\n                message: \"已添加入我的喜欢-可进入网易云音乐查看\",\r\n              });\r\n              return;\r\n            }\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"已从我的喜欢列表删除\",\r\n            });\r\n          }\r\n        })\r\n        .catch((res) => {});\r\n    },\r\n    //试听音乐\r\n    listenMusic(songDetals) {\r\n      //获取播放音乐链接\r\n      var that = this;\r\n      var list = \"songlist\";\r\n      listenMusic(songDetals, that);\r\n    },\r\n    //添加歌曲到播放列表\r\n    playMusic(songDetals) {\r\n      //获取播放音乐链接\r\n      var that = this;\r\n      var list = \"songlist\";\r\n      playMusic(songDetals, that);\r\n    },\r\n    playMV(mvId) {\r\n      //获取mv播放链接\r\n      this.$router.push({\r\n        name: \"mvPlay\",\r\n        params: { mvId: mvId },\r\n      });\r\n    },\r\n    //获取歌曲下载地址\r\n    getDownloadUrl(songId, songName) {\r\n      var that = this;\r\n      that.$message({\r\n        type: \"success\",\r\n        message: \"正在尝试下载\",\r\n      });\r\n      let params = {\r\n        id: songId,\r\n      };\r\n      getDownloadUrl(params).then((res) => {\r\n        // console.log('歌曲下载地址：', res.data)\r\n        // console.log(\"歌曲下载地址：\", res.data.data.url);\r\n        // download(res.data.data.url, songName)\r\n        download(res.data.data[0].url, songName);\r\n        that.$message({\r\n          type: \"success\",\r\n          message: \"开始下载了\",\r\n        });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" >\r\n.music-list {\r\n  position: relative;\r\n  display: flex;\r\n  align-content: center;\r\n  justify-content: space-around;\r\n  margin: 5px auto 5px;\r\n  padding: 0 15px;\r\n  width: 96%;\r\n  //   height: 30px;\r\n  //   line-height: 30px;\r\n  overflow: hidden;\r\n  color: rgba(255, 255, 255, 1);\r\n  font-weight: bolder;\r\n  border-radius: 5px;\r\n  -o-text-overflow: ellipsis;\r\n  text-overflow: ellipsis;\r\n  background-color: rgba(99, 187, 162, 0.044);\r\n  border-radius: 15px;\r\n  transition: 0.2s;\r\n\r\n  .music-list-index {\r\n    position: absolute;\r\n    left: 0;\r\n    width: 3%;\r\n  }\r\n  .music-list-info {\r\n    display: flex;\r\n    align-content: center;\r\n    justify-content: space-between;\r\n    width: 70%;\r\n\r\n    .music-list-span,\r\n    .music-list-dt {\r\n      text-align: center;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n    }\r\n    .music-list-span {\r\n      width: 40%;\r\n    }\r\n    .music-list-dt {\r\n      width: 25%;\r\n      // font-size:13px;\r\n      text-align: center;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n    }\r\n  }\r\n\r\n  .option {\r\n    display: inline-block;\r\n    margin-left: 5%;\r\n    width: 10%;\r\n    box-sizing: border-box;\r\n\r\n    span {\r\n      display: inline-block;\r\n      width: 20%;\r\n      &:hover {\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n\r\n  &:hover {\r\n    color: rgb(88, 255, 241);\r\n    transform: scale(1.01);\r\n    // background: rgba(141, 251, 255, 0.192);\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}