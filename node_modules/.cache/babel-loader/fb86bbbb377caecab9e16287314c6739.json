{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getMVUrl, getcommentMV, getMvDetails, getMvDetailInfo } from \"@/api/api\";\nexport default {\n  // props: ['mvId'],\n  data() {\n    return {\n      mvUrl: \"\",\n      mvId: \"\",\n      mvComments: [],\n      mvDetail: {},\n      count: \"\",\n      currentPage: 1\n    };\n  },\n\n  mounted() {\n    //缓存id,解决params数据在刷新页面后丢失，导致无法获取到歌单id\n    if (this.$route.params.mvId) {\n      localStorage.setItem(\"mvId\", this.$route.params.mvId);\n    } // 判断是否使用缓存\n\n\n    this.$route.params.mvId ? this.mvId = this.$route.params.mvId : this.mvId = localStorage.getItem(\"mvId\");\n    this.playMV();\n  },\n\n  methods: {\n    //mv分页\n    videohandleCurrentChange: function (currentPage) {\n      // console.log(`当前页: ${currentPage}`);\n      this.currentPage = currentPage; // console.log(\"我是第一\"+this.currentPage)\n\n      this.playMV(this.mvId, currentPage);\n    },\n\n    playMV() {\n      let params = {\n        mvid: this.mvId\n      };\n      getMVUrl({\n        id: this.mvId\n      }).then(res => {\n        this.mvUrl = res.data.data.url;\n      }); //mv详情\n\n      getMvDetails(params).then(res => {\n        // console.log('mv详情---：', res.data.data)\n        this.mvDetail = res.data.data; // mv点赞转发评论数数据\n\n        getMvDetailInfo(params).then(res => {\n          // console.log(\"mv点赞转发评论数数据---:\", res.data);\n          this.$set(this.mvDetail, \"likedCount\", res.data.likedCount);\n        });\n      }); // 热门评论;\n\n      getcommentMV({\n        id: this.mvId,\n        limit: 8,\n        offset: (this.currentPage - 1) * 8\n      }).then(res => {\n        this.mvComments = res.data.comments; // console.log(\"我是评论\" + this.mvComments);\n\n        this.count = res.data.total; // console.log(\"我是最后面\"+page)\n      });\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}