{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport { playMusicUrl, getSongLyric, getSongDetails } from \"@/api/api\"; //添加歌曲到播放列表\n\nexport function playMusic(id, fee, index, list, that) {\n  //获取播放音乐链接\n  if (that[list][index].timer) {\n    if (fee == 1) {\n      that.$message({\n        message: \"VIP歌曲 - 只能试听30s\",\n        type: \"warning\"\n      });\n    }\n\n    playMusicUrl({\n      id: id\n    }).then(function (res) {\n      // console.log(\"播放音乐链接\", res.data.data[0].url);\n      if (res.data.data[0].url) {\n        that.songUrlAdd = res.data.data[0].url;\n      } else {\n        that.$message({\n          message: \"这首歌暂无版权\",\n          type: \"error\"\n        });\n        that[list][index].timer = false;\n        setTimeout(function () {\n          that[list][index].timer = true;\n        }, 3000);\n        return;\n      }\n    }), // 获取歌词\n    getSongLyric({\n      id: id\n    }).then(function (res) {\n      that.songlrc = res.data.lrc.lyric;\n    }), // 获取歌曲信息\n    getSongDetails({\n      ids: id\n    }).then(function (res) {\n      // console.log(\"获取歌曲信息，添加到播放器：\", res.data.songs[0]);\n      if (that.songUrlAdd != null) {\n        that.$store.commit(\"addSONG\", {\n          name: res.data.songs[0].name,\n          //歌曲名\n          artist: res.data.songs[0].ar[0].name,\n          //作者\n          url: that.songUrlAdd,\n          cover: res.data.songs[0].al.picUrl,\n          lrc: that.songlrc,\n          id: id // theme: that.randomColor(),\n\n        }); // console.log(\n        //   that.$store.state.audio,\n        //   \"添加歌曲后的歌曲播放列表-----\"\n        // );\n\n        that.songUrlAdd = null;\n        that.songlrc = \"\";\n        that[list][index].timer = false;\n        setTimeout(function () {\n          that[list][index].timer = true;\n        }, 3000);\n      }\n    });\n  }\n}","map":{"version":3,"sources":["D:/Desktop/git工作区/cloudMusic-Source-Code/src/utils/musicPlay.js"],"names":["playMusicUrl","getSongLyric","getSongDetails","playMusic","id","fee","index","list","that","timer","$message","message","type","then","res","data","url","songUrlAdd","setTimeout","songlrc","lrc","lyric","ids","$store","commit","name","songs","artist","ar","cover","al","picUrl"],"mappings":";AAAA,SACEA,YADF,EAEEC,YAFF,EAGEC,cAHF,QAIO,WAJP,C,CAMC;;AACA,OAAO,SAASC,SAAT,CAAoBC,EAApB,EAAwBC,GAAxB,EAA6BC,KAA7B,EAAqCC,IAArC,EAA4CC,IAA5C,EAAiD;AACxD;AACA,MAAIA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBG,KAAtB,EAA6B;AAC5B,QAAIJ,GAAG,IAAI,CAAX,EAAc;AACbG,MAAAA,IAAI,CAACE,QAAL,CAAc;AACbC,QAAAA,OAAO,EAAE,iBADI;AAEbC,QAAAA,IAAI,EAAE;AAFO,OAAd;AAIA;;AACDZ,IAAAA,YAAY,CAAC;AACZI,MAAAA,EAAE,EAAEA;AADQ,KAAD,CAAZ,CAEGS,IAFH,CAEQ,UAACC,GAAD,EAAS;AAChB;AACA,UAAIA,GAAG,CAACC,IAAJ,CAASA,IAAT,CAAc,CAAd,EAAiBC,GAArB,EAA0B;AACzBR,QAAAA,IAAI,CAACS,UAAL,GAAkBH,GAAG,CAACC,IAAJ,CAASA,IAAT,CAAc,CAAd,EAAiBC,GAAnC;AACA,OAFD,MAEO;AACNR,QAAAA,IAAI,CAACE,QAAL,CAAc;AACbC,UAAAA,OAAO,EAAE,SADI;AAEbC,UAAAA,IAAI,EAAE;AAFO,SAAd;AAIAJ,QAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBG,KAAlB,GAA0B,KAA1B;AACAS,QAAAA,UAAU,CAAC,YAAM;AAChBV,UAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBG,KAAlB,GAA0B,IAA1B;AACA,SAFS,EAEP,IAFO,CAAV;AAGA;AACA;AACD,KAjBD,GAkBC;AACAR,IAAAA,YAAY,CAAC;AACZG,MAAAA,EAAE,EAAEA;AADQ,KAAD,CAAZ,CAEGS,IAFH,CAEQ,UAACC,GAAD,EAAS;AAChBN,MAAAA,IAAI,CAACW,OAAL,GAAeL,GAAG,CAACC,IAAJ,CAASK,GAAT,CAAaC,KAA5B;AACA,KAJD,CAnBD,EAwBC;AACAnB,IAAAA,cAAc,CAAC;AACdoB,MAAAA,GAAG,EAAElB;AADS,KAAD,CAAd,CAEGS,IAFH,CAEQ,UAACC,GAAD,EAAS;AAChB;AACA,UAAIN,IAAI,CAACS,UAAL,IAAmB,IAAvB,EAA6B;AAC5BT,QAAAA,IAAI,CAACe,MAAL,CAAYC,MAAZ,CAAmB,SAAnB,EAA8B;AAC7BC,UAAAA,IAAI,EAAEX,GAAG,CAACC,IAAJ,CAASW,KAAT,CAAe,CAAf,EAAkBD,IADK;AACC;AAC9BE,UAAAA,MAAM,EAAEb,GAAG,CAACC,IAAJ,CAASW,KAAT,CAAe,CAAf,EAAkBE,EAAlB,CAAqB,CAArB,EAAwBH,IAFH;AAES;AACtCT,UAAAA,GAAG,EAAER,IAAI,CAACS,UAHmB;AAI7BY,UAAAA,KAAK,EAAEf,GAAG,CAACC,IAAJ,CAASW,KAAT,CAAe,CAAf,EAAkBI,EAAlB,CAAqBC,MAJC;AAK7BX,UAAAA,GAAG,EAAEZ,IAAI,CAACW,OALmB;AAM7Bf,UAAAA,EAAE,EAAEA,EANyB,CAO7B;;AAP6B,SAA9B,EAD4B,CAU5B;AACA;AACA;AACA;;AACAI,QAAAA,IAAI,CAACS,UAAL,GAAkB,IAAlB;AACAT,QAAAA,IAAI,CAACW,OAAL,GAAe,EAAf;AACAX,QAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBG,KAAlB,GAA0B,KAA1B;AACAS,QAAAA,UAAU,CAAC,YAAM;AAChBV,UAAAA,IAAI,CAACD,IAAD,CAAJ,CAAWD,KAAX,EAAkBG,KAAlB,GAA0B,IAA1B;AACA,SAFS,EAEP,IAFO,CAAV;AAGA;AACD,KAzBD,CAzBD;AAmDA;AACD","sourcesContent":["import {\r\n  playMusicUrl,\r\n  getSongLyric,\r\n  getSongDetails,\r\n} from \"@/api/api\";\r\n\r\n //添加歌曲到播放列表\r\n export function playMusic (id, fee, index , list , that){\r\n\t//获取播放音乐链接\r\n\tif (that[list][index].timer) {\r\n\t\tif (fee == 1) {\r\n\t\t\tthat.$message({\r\n\t\t\t\tmessage: \"VIP歌曲 - 只能试听30s\",\r\n\t\t\t\ttype: \"warning\",\r\n\t\t\t});\r\n\t\t}\r\n\t\tplayMusicUrl({\r\n\t\t\tid: id,\r\n\t\t}).then((res) => {\r\n\t\t\t// console.log(\"播放音乐链接\", res.data.data[0].url);\r\n\t\t\tif (res.data.data[0].url) {\r\n\t\t\t\tthat.songUrlAdd = res.data.data[0].url;\r\n\t\t\t} else {\r\n\t\t\t\tthat.$message({\r\n\t\t\t\t\tmessage: \"这首歌暂无版权\",\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t});\r\n\t\t\t\tthat[list][index].timer = false;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthat[list][index].timer = true;\r\n\t\t\t\t}, 3000);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}),\r\n\t\t\t// 获取歌词\r\n\t\t\tgetSongLyric({\r\n\t\t\t\tid: id,\r\n\t\t\t}).then((res) => {\r\n\t\t\t\tthat.songlrc = res.data.lrc.lyric;\r\n\t\t\t}),\r\n\t\t\t// 获取歌曲信息\r\n\t\t\tgetSongDetails({\r\n\t\t\t\tids: id,\r\n\t\t\t}).then((res) => {\r\n\t\t\t\t// console.log(\"获取歌曲信息，添加到播放器：\", res.data.songs[0]);\r\n\t\t\t\tif (that.songUrlAdd != null) {\r\n\t\t\t\t\tthat.$store.commit(\"addSONG\", {\r\n\t\t\t\t\t\tname: res.data.songs[0].name, //歌曲名\r\n\t\t\t\t\t\tartist: res.data.songs[0].ar[0].name, //作者\r\n\t\t\t\t\t\turl: that.songUrlAdd,\r\n\t\t\t\t\t\tcover: res.data.songs[0].al.picUrl,\r\n\t\t\t\t\t\tlrc: that.songlrc,\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\t// theme: that.randomColor(),\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// console.log(\r\n\t\t\t\t\t//   that.$store.state.audio,\r\n\t\t\t\t\t//   \"添加歌曲后的歌曲播放列表-----\"\r\n\t\t\t\t\t// );\r\n\t\t\t\t\tthat.songUrlAdd = null;\r\n\t\t\t\t\tthat.songlrc = \"\";\r\n\t\t\t\t\tthat[list][index].timer = false;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthat[list][index].timer = true;\r\n\t\t\t\t\t}, 3000);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}